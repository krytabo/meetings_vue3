{"ast":null,"code":"import { h, ref, onMounted, computed, defineComponent, toRef, provide, nextTick, watch, onBeforeUnmount } from 'vue';\nimport { createIndexGetter } from 'treemate';\nimport { VirtualList } from 'vueuc';\nimport { depx, getPadding, happensIn } from 'seemly';\nimport { NEmpty } from '../../../empty';\nimport { NScrollbar } from '../../scrollbar';\nimport { resolveSlot, resolveWrappedSlot, useOnResize } from '../../../_utils';\nimport { createKey } from '../../../_utils/cssr';\nimport { useThemeClass, useTheme } from '../../../_mixins';\nimport NInternalLoading from '../../loading';\nimport NFocusDetector from '../../focus-detector';\nimport { internalSelectMenuLight } from '../styles';\nimport NSelectOption from './SelectOption';\nimport NSelectGroupHeader from './SelectGroupHeader';\nimport { internalSelectionMenuInjectionKey, internalSelectionMenuBodyInjectionKey } from './interface';\nimport style from './styles/index.cssr';\nexport default defineComponent({\n  name: 'InternalSelectMenu',\n  props: Object.assign(Object.assign({}, useTheme.props), {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    scrollable: {\n      type: Boolean,\n      default: true\n    },\n    treeMate: {\n      type: Object,\n      required: true\n    },\n    multiple: Boolean,\n    size: {\n      type: String,\n      default: 'medium'\n    },\n    value: {\n      type: [String, Number, Array],\n      default: null\n    },\n    autoPending: Boolean,\n    virtualScroll: {\n      type: Boolean,\n      default: true\n    },\n    // show is used to toggle pending state initialization\n    show: {\n      type: Boolean,\n      default: true\n    },\n    labelField: {\n      type: String,\n      default: 'label'\n    },\n    valueField: {\n      type: String,\n      default: 'value'\n    },\n    loading: Boolean,\n    focusable: Boolean,\n    renderLabel: Function,\n    renderOption: Function,\n    nodeProps: Function,\n    showCheckmark: {\n      type: Boolean,\n      default: true\n    },\n    onMousedown: Function,\n    onScroll: Function,\n    onFocus: Function,\n    onBlur: Function,\n    onKeyup: Function,\n    onKeydown: Function,\n    onTabOut: Function,\n    onMouseenter: Function,\n    onMouseleave: Function,\n    onResize: Function,\n    resetMenuOnOptionsChange: {\n      type: Boolean,\n      default: true\n    },\n    inlineThemeDisabled: Boolean,\n    // deprecated\n    onToggle: Function\n  }),\n  setup(props) {\n    const themeRef = useTheme('InternalSelectMenu', '-internal-select-menu', style, internalSelectMenuLight, props, toRef(props, 'clsPrefix'));\n    const selfRef = ref(null);\n    const virtualListRef = ref(null);\n    const scrollbarRef = ref(null);\n    const flattenedNodesRef = computed(() => props.treeMate.getFlattenedNodes());\n    const fIndexGetterRef = computed(() => createIndexGetter(flattenedNodesRef.value));\n    const pendingNodeRef = ref(null);\n    function initPendingNode() {\n      const {\n        treeMate\n      } = props;\n      let defaultPendingNode = null;\n      const {\n        value\n      } = props;\n      if (value === null) {\n        defaultPendingNode = treeMate.getFirstAvailableNode();\n      } else {\n        if (props.multiple) {\n          defaultPendingNode = treeMate.getNode((value || [])[(value || []).length - 1]);\n        } else {\n          defaultPendingNode = treeMate.getNode(value);\n        }\n        if (!defaultPendingNode || defaultPendingNode.disabled) {\n          defaultPendingNode = treeMate.getFirstAvailableNode();\n        }\n      }\n      if (defaultPendingNode) {\n        setPendingTmNode(defaultPendingNode);\n      } else {\n        setPendingTmNode(null);\n      }\n    }\n    function clearPendingNodeIfInvalid() {\n      const {\n        value: pendingNode\n      } = pendingNodeRef;\n      if (pendingNode && !props.treeMate.getNode(pendingNode.key)) {\n        pendingNodeRef.value = null;\n      }\n    }\n    let initPendingNodeWatchStopHandle;\n    watch(() => props.show, show => {\n      if (show) {\n        initPendingNodeWatchStopHandle = watch(() => props.treeMate, () => {\n          if (props.resetMenuOnOptionsChange) {\n            if (props.autoPending) {\n              initPendingNode();\n            } else {\n              clearPendingNodeIfInvalid();\n            }\n            void nextTick(scrollToPendingNode);\n          } else {\n            clearPendingNodeIfInvalid();\n          }\n        }, {\n          immediate: true\n        });\n      } else {\n        initPendingNodeWatchStopHandle === null || initPendingNodeWatchStopHandle === void 0 ? void 0 : initPendingNodeWatchStopHandle();\n      }\n    }, {\n      immediate: true\n    });\n    onBeforeUnmount(() => {\n      initPendingNodeWatchStopHandle === null || initPendingNodeWatchStopHandle === void 0 ? void 0 : initPendingNodeWatchStopHandle();\n    });\n    const itemSizeRef = computed(() => {\n      return depx(themeRef.value.self[createKey('optionHeight', props.size)]);\n    });\n    const paddingRef = computed(() => {\n      return getPadding(themeRef.value.self[createKey('padding', props.size)]);\n    });\n    const valueSetRef = computed(() => {\n      if (props.multiple && Array.isArray(props.value)) {\n        return new Set(props.value);\n      }\n      return new Set();\n    });\n    const emptyRef = computed(() => {\n      const tmNodes = flattenedNodesRef.value;\n      return tmNodes && tmNodes.length === 0;\n    });\n    function doToggle(tmNode) {\n      const {\n        onToggle\n      } = props;\n      if (onToggle) onToggle(tmNode);\n    }\n    function doScroll(e) {\n      const {\n        onScroll\n      } = props;\n      if (onScroll) onScroll(e);\n    }\n    // required, scroller sync need to be triggered manually\n    function handleVirtualListScroll(e) {\n      var _a;\n      (_a = scrollbarRef.value) === null || _a === void 0 ? void 0 : _a.sync();\n      doScroll(e);\n    }\n    function handleVirtualListResize() {\n      var _a;\n      (_a = scrollbarRef.value) === null || _a === void 0 ? void 0 : _a.sync();\n    }\n    function getPendingTmNode() {\n      const {\n        value: pendingTmNode\n      } = pendingNodeRef;\n      if (pendingTmNode) return pendingTmNode;\n      return null;\n    }\n    function handleOptionMouseEnter(e, tmNode) {\n      if (tmNode.disabled) return;\n      setPendingTmNode(tmNode, false);\n    }\n    function handleOptionClick(e, tmNode) {\n      if (tmNode.disabled) return;\n      doToggle(tmNode);\n    }\n    // keyboard related methods\n    function handleKeyUp(e) {\n      var _a;\n      if (happensIn(e, 'action')) return;\n      (_a = props.onKeyup) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    }\n    function handleKeyDown(e) {\n      var _a;\n      if (happensIn(e, 'action')) return;\n      (_a = props.onKeydown) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    }\n    function handleMouseDown(e) {\n      var _a;\n      (_a = props.onMousedown) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      if (props.focusable) return;\n      e.preventDefault();\n    }\n    function next() {\n      const {\n        value: pendingTmNode\n      } = pendingNodeRef;\n      if (pendingTmNode) {\n        setPendingTmNode(pendingTmNode.getNext({\n          loop: true\n        }), true);\n      }\n    }\n    function prev() {\n      const {\n        value: pendingTmNode\n      } = pendingNodeRef;\n      if (pendingTmNode) {\n        setPendingTmNode(pendingTmNode.getPrev({\n          loop: true\n        }), true);\n      }\n    }\n    function setPendingTmNode(tmNode, doScroll = false) {\n      pendingNodeRef.value = tmNode;\n      if (doScroll) scrollToPendingNode();\n    }\n    function scrollToPendingNode() {\n      var _a, _b;\n      const tmNode = pendingNodeRef.value;\n      if (!tmNode) return;\n      const fIndex = fIndexGetterRef.value(tmNode.key);\n      if (fIndex === null) return;\n      if (props.virtualScroll) {\n        (_a = virtualListRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo({\n          index: fIndex\n        });\n      } else {\n        (_b = scrollbarRef.value) === null || _b === void 0 ? void 0 : _b.scrollTo({\n          index: fIndex,\n          elSize: itemSizeRef.value\n        });\n      }\n    }\n    function handleFocusin(e) {\n      var _a, _b;\n      if ((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.target)) {\n        (_b = props.onFocus) === null || _b === void 0 ? void 0 : _b.call(props, e);\n      }\n    }\n    function handleFocusout(e) {\n      var _a, _b;\n      if (!((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget))) {\n        (_b = props.onBlur) === null || _b === void 0 ? void 0 : _b.call(props, e);\n      }\n    }\n    provide(internalSelectionMenuInjectionKey, {\n      handleOptionMouseEnter,\n      handleOptionClick,\n      valueSetRef,\n      pendingTmNodeRef: pendingNodeRef,\n      nodePropsRef: toRef(props, 'nodeProps'),\n      showCheckmarkRef: toRef(props, 'showCheckmark'),\n      multipleRef: toRef(props, 'multiple'),\n      valueRef: toRef(props, 'value'),\n      renderLabelRef: toRef(props, 'renderLabel'),\n      renderOptionRef: toRef(props, 'renderOption'),\n      labelFieldRef: toRef(props, 'labelField'),\n      valueFieldRef: toRef(props, 'valueField')\n    });\n    provide(internalSelectionMenuBodyInjectionKey, selfRef);\n    onMounted(() => {\n      const {\n        value\n      } = scrollbarRef;\n      if (value) value.sync();\n    });\n    const cssVarsRef = computed(() => {\n      const {\n        size\n      } = props;\n      const {\n        common: {\n          cubicBezierEaseInOut\n        },\n        self: {\n          height,\n          borderRadius,\n          color,\n          groupHeaderTextColor,\n          actionDividerColor,\n          optionTextColorPressed,\n          optionTextColor,\n          optionTextColorDisabled,\n          optionTextColorActive,\n          optionOpacityDisabled,\n          optionCheckColor,\n          actionTextColor,\n          optionColorPending,\n          optionColorActive,\n          loadingColor,\n          loadingSize,\n          optionColorActivePending,\n          [createKey('optionFontSize', size)]: fontSize,\n          [createKey('optionHeight', size)]: optionHeight,\n          [createKey('optionPadding', size)]: optionPadding\n        }\n      } = themeRef.value;\n      return {\n        '--n-height': height,\n        '--n-action-divider-color': actionDividerColor,\n        '--n-action-text-color': actionTextColor,\n        '--n-bezier': cubicBezierEaseInOut,\n        '--n-border-radius': borderRadius,\n        '--n-color': color,\n        '--n-option-font-size': fontSize,\n        '--n-group-header-text-color': groupHeaderTextColor,\n        '--n-option-check-color': optionCheckColor,\n        '--n-option-color-pending': optionColorPending,\n        '--n-option-color-active': optionColorActive,\n        '--n-option-color-active-pending': optionColorActivePending,\n        '--n-option-height': optionHeight,\n        '--n-option-opacity-disabled': optionOpacityDisabled,\n        '--n-option-text-color': optionTextColor,\n        '--n-option-text-color-active': optionTextColorActive,\n        '--n-option-text-color-disabled': optionTextColorDisabled,\n        '--n-option-text-color-pressed': optionTextColorPressed,\n        '--n-option-padding': optionPadding,\n        '--n-option-padding-left': getPadding(optionPadding, 'left'),\n        '--n-option-padding-right': getPadding(optionPadding, 'right'),\n        '--n-loading-color': loadingColor,\n        '--n-loading-size': loadingSize\n      };\n    });\n    const {\n      inlineThemeDisabled\n    } = props;\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('internal-select-menu', computed(() => props.size[0]), cssVarsRef, props) : undefined;\n    const exposedProps = {\n      selfRef,\n      next,\n      prev,\n      getPendingTmNode\n    };\n    useOnResize(selfRef, props.onResize);\n    return Object.assign({\n      mergedTheme: themeRef,\n      virtualListRef,\n      scrollbarRef,\n      itemSize: itemSizeRef,\n      padding: paddingRef,\n      flattenedNodes: flattenedNodesRef,\n      empty: emptyRef,\n      virtualListContainer() {\n        const {\n          value\n        } = virtualListRef;\n        return value === null || value === void 0 ? void 0 : value.listElRef;\n      },\n      virtualListContent() {\n        const {\n          value\n        } = virtualListRef;\n        return value === null || value === void 0 ? void 0 : value.itemsElRef;\n      },\n      doScroll,\n      handleFocusin,\n      handleFocusout,\n      handleKeyUp,\n      handleKeyDown,\n      handleMouseDown,\n      handleVirtualListResize,\n      handleVirtualListScroll,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    }, exposedProps);\n  },\n  render() {\n    const {\n      $slots,\n      virtualScroll,\n      clsPrefix,\n      mergedTheme,\n      themeClass,\n      onRender\n    } = this;\n    onRender === null || onRender === void 0 ? void 0 : onRender();\n    return h(\"div\", {\n      ref: \"selfRef\",\n      tabindex: this.focusable ? 0 : -1,\n      class: [`${clsPrefix}-base-select-menu`, themeClass, this.multiple && `${clsPrefix}-base-select-menu--multiple`],\n      style: this.cssVars,\n      onFocusin: this.handleFocusin,\n      onFocusout: this.handleFocusout,\n      onKeyup: this.handleKeyUp,\n      onKeydown: this.handleKeyDown,\n      onMousedown: this.handleMouseDown,\n      onMouseenter: this.onMouseenter,\n      onMouseleave: this.onMouseleave\n    }, this.loading ? h(\"div\", {\n      class: `${clsPrefix}-base-select-menu__loading`\n    }, h(NInternalLoading, {\n      clsPrefix: clsPrefix,\n      strokeWidth: 20\n    })) : !this.empty ? h(NScrollbar, {\n      ref: \"scrollbarRef\",\n      theme: mergedTheme.peers.Scrollbar,\n      themeOverrides: mergedTheme.peerOverrides.Scrollbar,\n      scrollable: this.scrollable,\n      container: virtualScroll ? this.virtualListContainer : undefined,\n      content: virtualScroll ? this.virtualListContent : undefined,\n      onScroll: virtualScroll ? undefined : this.doScroll\n    }, {\n      default: () => {\n        return virtualScroll ? h(VirtualList, {\n          ref: \"virtualListRef\",\n          class: `${clsPrefix}-virtual-list`,\n          items: this.flattenedNodes,\n          itemSize: this.itemSize,\n          showScrollbar: false,\n          paddingTop: this.padding.top,\n          paddingBottom: this.padding.bottom,\n          onResize: this.handleVirtualListResize,\n          onScroll: this.handleVirtualListScroll,\n          itemResizable: true\n        }, {\n          default: ({\n            item: tmNode\n          }) => {\n            return tmNode.isGroup ? h(NSelectGroupHeader, {\n              key: tmNode.key,\n              clsPrefix: clsPrefix,\n              tmNode: tmNode\n            }) : tmNode.ignored ? null : h(NSelectOption, {\n              clsPrefix: clsPrefix,\n              key: tmNode.key,\n              tmNode: tmNode\n            });\n          }\n        }) : h(\"div\", {\n          class: `${clsPrefix}-base-select-menu-option-wrapper`,\n          style: {\n            paddingTop: this.padding.top,\n            paddingBottom: this.padding.bottom\n          }\n        }, this.flattenedNodes.map(tmNode => tmNode.isGroup ? h(NSelectGroupHeader, {\n          key: tmNode.key,\n          clsPrefix: clsPrefix,\n          tmNode: tmNode\n        }) : h(NSelectOption, {\n          clsPrefix: clsPrefix,\n          key: tmNode.key,\n          tmNode: tmNode\n        })));\n      }\n    }) : h(\"div\", {\n      class: `${clsPrefix}-base-select-menu__empty`,\n      \"data-empty\": true\n    }, resolveSlot($slots.empty, () => [h(NEmpty, {\n      theme: mergedTheme.peers.Empty,\n      themeOverrides: mergedTheme.peerOverrides.Empty\n    })])), resolveWrappedSlot($slots.action, children => children && [h(\"div\", {\n      class: `${clsPrefix}-base-select-menu__action`,\n      \"data-action\": true,\n      key: \"action\"\n    }, children), h(NFocusDetector, {\n      onFocus: this.onTabOut,\n      key: \"focus-detector\"\n    })]));\n  }\n});","map":{"version":3,"names":["h","ref","onMounted","computed","defineComponent","toRef","provide","nextTick","watch","onBeforeUnmount","createIndexGetter","VirtualList","depx","getPadding","happensIn","NEmpty","NScrollbar","resolveSlot","resolveWrappedSlot","useOnResize","createKey","useThemeClass","useTheme","NInternalLoading","NFocusDetector","internalSelectMenuLight","NSelectOption","NSelectGroupHeader","internalSelectionMenuInjectionKey","internalSelectionMenuBodyInjectionKey","style","name","props","Object","assign","clsPrefix","type","String","required","scrollable","Boolean","default","treeMate","multiple","size","value","Number","Array","autoPending","virtualScroll","show","labelField","valueField","loading","focusable","renderLabel","Function","renderOption","nodeProps","showCheckmark","onMousedown","onScroll","onFocus","onBlur","onKeyup","onKeydown","onTabOut","onMouseenter","onMouseleave","onResize","resetMenuOnOptionsChange","inlineThemeDisabled","onToggle","setup","themeRef","selfRef","virtualListRef","scrollbarRef","flattenedNodesRef","getFlattenedNodes","fIndexGetterRef","pendingNodeRef","initPendingNode","defaultPendingNode","getFirstAvailableNode","getNode","length","disabled","setPendingTmNode","clearPendingNodeIfInvalid","pendingNode","key","initPendingNodeWatchStopHandle","scrollToPendingNode","immediate","itemSizeRef","self","paddingRef","valueSetRef","isArray","Set","emptyRef","tmNodes","doToggle","tmNode","doScroll","e","handleVirtualListScroll","_a","sync","handleVirtualListResize","getPendingTmNode","pendingTmNode","handleOptionMouseEnter","handleOptionClick","handleKeyUp","call","handleKeyDown","handleMouseDown","preventDefault","next","getNext","loop","prev","getPrev","_b","fIndex","scrollTo","index","elSize","handleFocusin","contains","target","handleFocusout","relatedTarget","pendingTmNodeRef","nodePropsRef","showCheckmarkRef","multipleRef","valueRef","renderLabelRef","renderOptionRef","labelFieldRef","valueFieldRef","cssVarsRef","common","cubicBezierEaseInOut","height","borderRadius","color","groupHeaderTextColor","actionDividerColor","optionTextColorPressed","optionTextColor","optionTextColorDisabled","optionTextColorActive","optionOpacityDisabled","optionCheckColor","actionTextColor","optionColorPending","optionColorActive","loadingColor","loadingSize","optionColorActivePending","fontSize","optionHeight","optionPadding","themeClassHandle","undefined","exposedProps","mergedTheme","itemSize","padding","flattenedNodes","empty","virtualListContainer","listElRef","virtualListContent","itemsElRef","cssVars","themeClass","onRender","render","$slots","tabindex","class","onFocusin","onFocusout","strokeWidth","theme","peers","Scrollbar","themeOverrides","peerOverrides","container","content","items","showScrollbar","paddingTop","top","paddingBottom","bottom","itemResizable","item","isGroup","ignored","map","Empty","action","children"],"sources":["/Users/elmo/GitHub/meetings_vue3/node_modules/naive-ui/es/_internal/select-menu/src/SelectMenu.js"],"sourcesContent":["import { h, ref, onMounted, computed, defineComponent, toRef, provide, nextTick, watch, onBeforeUnmount } from 'vue';\nimport { createIndexGetter } from 'treemate';\nimport { VirtualList } from 'vueuc';\nimport { depx, getPadding, happensIn } from 'seemly';\nimport { NEmpty } from '../../../empty';\nimport { NScrollbar } from '../../scrollbar';\nimport { resolveSlot, resolveWrappedSlot, useOnResize } from '../../../_utils';\nimport { createKey } from '../../../_utils/cssr';\nimport { useThemeClass, useTheme } from '../../../_mixins';\nimport NInternalLoading from '../../loading';\nimport NFocusDetector from '../../focus-detector';\nimport { internalSelectMenuLight } from '../styles';\nimport NSelectOption from './SelectOption';\nimport NSelectGroupHeader from './SelectGroupHeader';\nimport { internalSelectionMenuInjectionKey, internalSelectionMenuBodyInjectionKey } from './interface';\nimport style from './styles/index.cssr';\nexport default defineComponent({\n    name: 'InternalSelectMenu',\n    props: Object.assign(Object.assign({}, useTheme.props), { clsPrefix: {\n            type: String,\n            required: true\n        }, scrollable: {\n            type: Boolean,\n            default: true\n        }, treeMate: {\n            type: Object,\n            required: true\n        }, multiple: Boolean, size: {\n            type: String,\n            default: 'medium'\n        }, value: {\n            type: [String, Number, Array],\n            default: null\n        }, autoPending: Boolean, virtualScroll: {\n            type: Boolean,\n            default: true\n        }, \n        // show is used to toggle pending state initialization\n        show: {\n            type: Boolean,\n            default: true\n        }, labelField: {\n            type: String,\n            default: 'label'\n        }, valueField: {\n            type: String,\n            default: 'value'\n        }, loading: Boolean, focusable: Boolean, renderLabel: Function, renderOption: Function, nodeProps: Function, showCheckmark: { type: Boolean, default: true }, onMousedown: Function, onScroll: Function, onFocus: Function, onBlur: Function, onKeyup: Function, onKeydown: Function, onTabOut: Function, onMouseenter: Function, onMouseleave: Function, onResize: Function, resetMenuOnOptionsChange: {\n            type: Boolean,\n            default: true\n        }, inlineThemeDisabled: Boolean, \n        // deprecated\n        onToggle: Function }),\n    setup(props) {\n        const themeRef = useTheme('InternalSelectMenu', '-internal-select-menu', style, internalSelectMenuLight, props, toRef(props, 'clsPrefix'));\n        const selfRef = ref(null);\n        const virtualListRef = ref(null);\n        const scrollbarRef = ref(null);\n        const flattenedNodesRef = computed(() => props.treeMate.getFlattenedNodes());\n        const fIndexGetterRef = computed(() => createIndexGetter(flattenedNodesRef.value));\n        const pendingNodeRef = ref(null);\n        function initPendingNode() {\n            const { treeMate } = props;\n            let defaultPendingNode = null;\n            const { value } = props;\n            if (value === null) {\n                defaultPendingNode = treeMate.getFirstAvailableNode();\n            }\n            else {\n                if (props.multiple) {\n                    defaultPendingNode = treeMate.getNode((value || [])[(value || []).length - 1]);\n                }\n                else {\n                    defaultPendingNode = treeMate.getNode(value);\n                }\n                if (!defaultPendingNode || defaultPendingNode.disabled) {\n                    defaultPendingNode = treeMate.getFirstAvailableNode();\n                }\n            }\n            if (defaultPendingNode) {\n                setPendingTmNode(defaultPendingNode);\n            }\n            else {\n                setPendingTmNode(null);\n            }\n        }\n        function clearPendingNodeIfInvalid() {\n            const { value: pendingNode } = pendingNodeRef;\n            if (pendingNode && !props.treeMate.getNode(pendingNode.key)) {\n                pendingNodeRef.value = null;\n            }\n        }\n        let initPendingNodeWatchStopHandle;\n        watch(() => props.show, (show) => {\n            if (show) {\n                initPendingNodeWatchStopHandle = watch(() => props.treeMate, () => {\n                    if (props.resetMenuOnOptionsChange) {\n                        if (props.autoPending) {\n                            initPendingNode();\n                        }\n                        else {\n                            clearPendingNodeIfInvalid();\n                        }\n                        void nextTick(scrollToPendingNode);\n                    }\n                    else {\n                        clearPendingNodeIfInvalid();\n                    }\n                }, {\n                    immediate: true\n                });\n            }\n            else {\n                initPendingNodeWatchStopHandle === null || initPendingNodeWatchStopHandle === void 0 ? void 0 : initPendingNodeWatchStopHandle();\n            }\n        }, {\n            immediate: true\n        });\n        onBeforeUnmount(() => {\n            initPendingNodeWatchStopHandle === null || initPendingNodeWatchStopHandle === void 0 ? void 0 : initPendingNodeWatchStopHandle();\n        });\n        const itemSizeRef = computed(() => {\n            return depx(themeRef.value.self[createKey('optionHeight', props.size)]);\n        });\n        const paddingRef = computed(() => {\n            return getPadding(themeRef.value.self[createKey('padding', props.size)]);\n        });\n        const valueSetRef = computed(() => {\n            if (props.multiple && Array.isArray(props.value)) {\n                return new Set(props.value);\n            }\n            return new Set();\n        });\n        const emptyRef = computed(() => {\n            const tmNodes = flattenedNodesRef.value;\n            return tmNodes && tmNodes.length === 0;\n        });\n        function doToggle(tmNode) {\n            const { onToggle } = props;\n            if (onToggle)\n                onToggle(tmNode);\n        }\n        function doScroll(e) {\n            const { onScroll } = props;\n            if (onScroll)\n                onScroll(e);\n        }\n        // required, scroller sync need to be triggered manually\n        function handleVirtualListScroll(e) {\n            var _a;\n            (_a = scrollbarRef.value) === null || _a === void 0 ? void 0 : _a.sync();\n            doScroll(e);\n        }\n        function handleVirtualListResize() {\n            var _a;\n            (_a = scrollbarRef.value) === null || _a === void 0 ? void 0 : _a.sync();\n        }\n        function getPendingTmNode() {\n            const { value: pendingTmNode } = pendingNodeRef;\n            if (pendingTmNode)\n                return pendingTmNode;\n            return null;\n        }\n        function handleOptionMouseEnter(e, tmNode) {\n            if (tmNode.disabled)\n                return;\n            setPendingTmNode(tmNode, false);\n        }\n        function handleOptionClick(e, tmNode) {\n            if (tmNode.disabled)\n                return;\n            doToggle(tmNode);\n        }\n        // keyboard related methods\n        function handleKeyUp(e) {\n            var _a;\n            if (happensIn(e, 'action'))\n                return;\n            (_a = props.onKeyup) === null || _a === void 0 ? void 0 : _a.call(props, e);\n        }\n        function handleKeyDown(e) {\n            var _a;\n            if (happensIn(e, 'action'))\n                return;\n            (_a = props.onKeydown) === null || _a === void 0 ? void 0 : _a.call(props, e);\n        }\n        function handleMouseDown(e) {\n            var _a;\n            (_a = props.onMousedown) === null || _a === void 0 ? void 0 : _a.call(props, e);\n            if (props.focusable)\n                return;\n            e.preventDefault();\n        }\n        function next() {\n            const { value: pendingTmNode } = pendingNodeRef;\n            if (pendingTmNode) {\n                setPendingTmNode(pendingTmNode.getNext({ loop: true }), true);\n            }\n        }\n        function prev() {\n            const { value: pendingTmNode } = pendingNodeRef;\n            if (pendingTmNode) {\n                setPendingTmNode(pendingTmNode.getPrev({ loop: true }), true);\n            }\n        }\n        function setPendingTmNode(tmNode, doScroll = false) {\n            pendingNodeRef.value = tmNode;\n            if (doScroll)\n                scrollToPendingNode();\n        }\n        function scrollToPendingNode() {\n            var _a, _b;\n            const tmNode = pendingNodeRef.value;\n            if (!tmNode)\n                return;\n            const fIndex = fIndexGetterRef.value(tmNode.key);\n            if (fIndex === null)\n                return;\n            if (props.virtualScroll) {\n                (_a = virtualListRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo({ index: fIndex });\n            }\n            else {\n                (_b = scrollbarRef.value) === null || _b === void 0 ? void 0 : _b.scrollTo({\n                    index: fIndex,\n                    elSize: itemSizeRef.value\n                });\n            }\n        }\n        function handleFocusin(e) {\n            var _a, _b;\n            if ((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.target)) {\n                (_b = props.onFocus) === null || _b === void 0 ? void 0 : _b.call(props, e);\n            }\n        }\n        function handleFocusout(e) {\n            var _a, _b;\n            if (!((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget))) {\n                (_b = props.onBlur) === null || _b === void 0 ? void 0 : _b.call(props, e);\n            }\n        }\n        provide(internalSelectionMenuInjectionKey, {\n            handleOptionMouseEnter,\n            handleOptionClick,\n            valueSetRef,\n            pendingTmNodeRef: pendingNodeRef,\n            nodePropsRef: toRef(props, 'nodeProps'),\n            showCheckmarkRef: toRef(props, 'showCheckmark'),\n            multipleRef: toRef(props, 'multiple'),\n            valueRef: toRef(props, 'value'),\n            renderLabelRef: toRef(props, 'renderLabel'),\n            renderOptionRef: toRef(props, 'renderOption'),\n            labelFieldRef: toRef(props, 'labelField'),\n            valueFieldRef: toRef(props, 'valueField')\n        });\n        provide(internalSelectionMenuBodyInjectionKey, selfRef);\n        onMounted(() => {\n            const { value } = scrollbarRef;\n            if (value)\n                value.sync();\n        });\n        const cssVarsRef = computed(() => {\n            const { size } = props;\n            const { common: { cubicBezierEaseInOut }, self: { height, borderRadius, color, groupHeaderTextColor, actionDividerColor, optionTextColorPressed, optionTextColor, optionTextColorDisabled, optionTextColorActive, optionOpacityDisabled, optionCheckColor, actionTextColor, optionColorPending, optionColorActive, loadingColor, loadingSize, optionColorActivePending, [createKey('optionFontSize', size)]: fontSize, [createKey('optionHeight', size)]: optionHeight, [createKey('optionPadding', size)]: optionPadding } } = themeRef.value;\n            return {\n                '--n-height': height,\n                '--n-action-divider-color': actionDividerColor,\n                '--n-action-text-color': actionTextColor,\n                '--n-bezier': cubicBezierEaseInOut,\n                '--n-border-radius': borderRadius,\n                '--n-color': color,\n                '--n-option-font-size': fontSize,\n                '--n-group-header-text-color': groupHeaderTextColor,\n                '--n-option-check-color': optionCheckColor,\n                '--n-option-color-pending': optionColorPending,\n                '--n-option-color-active': optionColorActive,\n                '--n-option-color-active-pending': optionColorActivePending,\n                '--n-option-height': optionHeight,\n                '--n-option-opacity-disabled': optionOpacityDisabled,\n                '--n-option-text-color': optionTextColor,\n                '--n-option-text-color-active': optionTextColorActive,\n                '--n-option-text-color-disabled': optionTextColorDisabled,\n                '--n-option-text-color-pressed': optionTextColorPressed,\n                '--n-option-padding': optionPadding,\n                '--n-option-padding-left': getPadding(optionPadding, 'left'),\n                '--n-option-padding-right': getPadding(optionPadding, 'right'),\n                '--n-loading-color': loadingColor,\n                '--n-loading-size': loadingSize\n            };\n        });\n        const { inlineThemeDisabled } = props;\n        const themeClassHandle = inlineThemeDisabled\n            ? useThemeClass('internal-select-menu', computed(() => props.size[0]), cssVarsRef, props)\n            : undefined;\n        const exposedProps = {\n            selfRef,\n            next,\n            prev,\n            getPendingTmNode\n        };\n        useOnResize(selfRef, props.onResize);\n        return Object.assign({ mergedTheme: themeRef, virtualListRef,\n            scrollbarRef, itemSize: itemSizeRef, padding: paddingRef, flattenedNodes: flattenedNodesRef, empty: emptyRef, virtualListContainer() {\n                const { value } = virtualListRef;\n                return value === null || value === void 0 ? void 0 : value.listElRef;\n            },\n            virtualListContent() {\n                const { value } = virtualListRef;\n                return value === null || value === void 0 ? void 0 : value.itemsElRef;\n            },\n            doScroll,\n            handleFocusin,\n            handleFocusout,\n            handleKeyUp,\n            handleKeyDown,\n            handleMouseDown,\n            handleVirtualListResize,\n            handleVirtualListScroll, cssVars: inlineThemeDisabled ? undefined : cssVarsRef, themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass, onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender }, exposedProps);\n    },\n    render() {\n        const { $slots, virtualScroll, clsPrefix, mergedTheme, themeClass, onRender } = this;\n        onRender === null || onRender === void 0 ? void 0 : onRender();\n        return (h(\"div\", { ref: \"selfRef\", tabindex: this.focusable ? 0 : -1, class: [\n                `${clsPrefix}-base-select-menu`,\n                themeClass,\n                this.multiple && `${clsPrefix}-base-select-menu--multiple`\n            ], style: this.cssVars, onFocusin: this.handleFocusin, onFocusout: this.handleFocusout, onKeyup: this.handleKeyUp, onKeydown: this.handleKeyDown, onMousedown: this.handleMouseDown, onMouseenter: this.onMouseenter, onMouseleave: this.onMouseleave },\n            this.loading ? (h(\"div\", { class: `${clsPrefix}-base-select-menu__loading` },\n                h(NInternalLoading, { clsPrefix: clsPrefix, strokeWidth: 20 }))) : !this.empty ? (h(NScrollbar, { ref: \"scrollbarRef\", theme: mergedTheme.peers.Scrollbar, themeOverrides: mergedTheme.peerOverrides.Scrollbar, scrollable: this.scrollable, container: virtualScroll ? this.virtualListContainer : undefined, content: virtualScroll ? this.virtualListContent : undefined, onScroll: virtualScroll ? undefined : this.doScroll }, {\n                default: () => {\n                    return virtualScroll ? (h(VirtualList, { ref: \"virtualListRef\", class: `${clsPrefix}-virtual-list`, items: this.flattenedNodes, itemSize: this.itemSize, showScrollbar: false, paddingTop: this.padding.top, paddingBottom: this.padding.bottom, onResize: this.handleVirtualListResize, onScroll: this.handleVirtualListScroll, itemResizable: true }, {\n                        default: ({ item: tmNode }) => {\n                            return tmNode.isGroup ? (h(NSelectGroupHeader, { key: tmNode.key, clsPrefix: clsPrefix, tmNode: tmNode })) : tmNode.ignored ? null : (h(NSelectOption, { clsPrefix: clsPrefix, key: tmNode.key, tmNode: tmNode }));\n                        }\n                    })) : (h(\"div\", { class: `${clsPrefix}-base-select-menu-option-wrapper`, style: {\n                            paddingTop: this.padding.top,\n                            paddingBottom: this.padding.bottom\n                        } }, this.flattenedNodes.map((tmNode) => tmNode.isGroup ? (h(NSelectGroupHeader, { key: tmNode.key, clsPrefix: clsPrefix, tmNode: tmNode })) : (h(NSelectOption, { clsPrefix: clsPrefix, key: tmNode.key, tmNode: tmNode })))));\n                }\n            })) : (h(\"div\", { class: `${clsPrefix}-base-select-menu__empty`, \"data-empty\": true }, resolveSlot($slots.empty, () => [\n                h(NEmpty, { theme: mergedTheme.peers.Empty, themeOverrides: mergedTheme.peerOverrides.Empty })\n            ]))),\n            resolveWrappedSlot($slots.action, (children) => children && [\n                h(\"div\", { class: `${clsPrefix}-base-select-menu__action`, \"data-action\": true, key: \"action\" }, children),\n                h(NFocusDetector, { onFocus: this.onTabOut, key: \"focus-detector\" })\n            ])));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}