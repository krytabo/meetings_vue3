{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineComponent, Fragment, ref, h, provide, reactive } from 'vue';\nimport { createId } from 'seemly';\nimport { useClicked, useClickPosition } from 'vooks';\nimport { omit } from '../../_utils';\nimport { NDialogEnvironment } from './DialogEnvironment';\nimport { dialogApiInjectionKey, dialogProviderInjectionKey, dialogReactiveListInjectionKey } from './context';\nexport const dialogProviderProps = {\n  injectionKey: String,\n  to: [String, Object]\n};\nexport const NDialogProvider = defineComponent({\n  name: 'DialogProvider',\n  props: dialogProviderProps,\n  setup() {\n    const dialogListRef = ref([]);\n    const dialogInstRefs = {};\n    function create(options = {}) {\n      const key = createId();\n      const dialogReactive = reactive(Object.assign(Object.assign({}, options), {\n        key,\n        destroy: () => {\n          dialogInstRefs[`n-dialog-${key}`].hide();\n        }\n      }));\n      dialogListRef.value.push(dialogReactive);\n      return dialogReactive;\n    }\n    const typedApi = ['info', 'success', 'warning', 'error'].map(type => options => {\n      return create(Object.assign(Object.assign({}, options), {\n        type\n      }));\n    });\n    function handleAfterLeave(key) {\n      const {\n        value: dialogList\n      } = dialogListRef;\n      dialogList.splice(dialogList.findIndex(dialog => dialog.key === key), 1);\n    }\n    function destroyAll() {\n      Object.values(dialogInstRefs).forEach(dialogInstRef => dialogInstRef.hide());\n    }\n    const api = {\n      create,\n      destroyAll,\n      info: typedApi[0],\n      success: typedApi[1],\n      warning: typedApi[2],\n      error: typedApi[3]\n    };\n    provide(dialogApiInjectionKey, api);\n    provide(dialogProviderInjectionKey, {\n      clickedRef: useClicked(64),\n      clickPositionRef: useClickPosition()\n    });\n    provide(dialogReactiveListInjectionKey, dialogListRef);\n    return Object.assign(Object.assign({}, api), {\n      dialogList: dialogListRef,\n      dialogInstRefs,\n      handleAfterLeave\n    });\n  },\n  render() {\n    var _a, _b;\n    return h(Fragment, null, [this.dialogList.map(dialog => h(NDialogEnvironment, omit(dialog, ['destroy', 'style'], {\n      internalStyle: dialog.style,\n      to: this.to,\n      ref: inst => {\n        if (inst === null) {\n          // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n          delete this.dialogInstRefs[`n-dialog-${dialog.key}`];\n        } else {\n          this.dialogInstRefs[`n-dialog-${dialog.key}`] = inst;\n        }\n      },\n      internalKey: dialog.key,\n      onInternalAfterLeave: this.handleAfterLeave\n    }))), (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a)]);\n  }\n});","map":{"version":3,"names":["defineComponent","Fragment","ref","h","provide","reactive","createId","useClicked","useClickPosition","omit","NDialogEnvironment","dialogApiInjectionKey","dialogProviderInjectionKey","dialogReactiveListInjectionKey","dialogProviderProps","injectionKey","String","to","Object","NDialogProvider","name","props","setup","dialogListRef","dialogInstRefs","create","options","key","dialogReactive","assign","destroy","hide","value","push","typedApi","map","type","handleAfterLeave","dialogList","splice","findIndex","dialog","destroyAll","values","forEach","dialogInstRef","api","info","success","warning","error","clickedRef","clickPositionRef","render","_a","_b","internalStyle","style","inst","internalKey","onInternalAfterLeave","$slots","default","call"],"sources":["/Users/elmo/Documents/GitHub/meetings_vue3/node_modules/naive-ui/es/dialog/src/DialogProvider.js"],"sourcesContent":["import { defineComponent, Fragment, ref, h, provide, reactive } from 'vue';\nimport { createId } from 'seemly';\nimport { useClicked, useClickPosition } from 'vooks';\nimport { omit } from '../../_utils';\nimport { NDialogEnvironment } from './DialogEnvironment';\nimport { dialogApiInjectionKey, dialogProviderInjectionKey, dialogReactiveListInjectionKey } from './context';\nexport const dialogProviderProps = {\n    injectionKey: String,\n    to: [String, Object]\n};\nexport const NDialogProvider = defineComponent({\n    name: 'DialogProvider',\n    props: dialogProviderProps,\n    setup() {\n        const dialogListRef = ref([]);\n        const dialogInstRefs = {};\n        function create(options = {}) {\n            const key = createId();\n            const dialogReactive = reactive(Object.assign(Object.assign({}, options), { key, destroy: () => {\n                    dialogInstRefs[`n-dialog-${key}`].hide();\n                } }));\n            dialogListRef.value.push(dialogReactive);\n            return dialogReactive;\n        }\n        const typedApi = ['info', 'success', 'warning', 'error'].map((type) => (options) => {\n            return create(Object.assign(Object.assign({}, options), { type }));\n        });\n        function handleAfterLeave(key) {\n            const { value: dialogList } = dialogListRef;\n            dialogList.splice(dialogList.findIndex((dialog) => dialog.key === key), 1);\n        }\n        function destroyAll() {\n            Object.values(dialogInstRefs).forEach((dialogInstRef) => dialogInstRef.hide());\n        }\n        const api = {\n            create,\n            destroyAll,\n            info: typedApi[0],\n            success: typedApi[1],\n            warning: typedApi[2],\n            error: typedApi[3]\n        };\n        provide(dialogApiInjectionKey, api);\n        provide(dialogProviderInjectionKey, {\n            clickedRef: useClicked(64),\n            clickPositionRef: useClickPosition()\n        });\n        provide(dialogReactiveListInjectionKey, dialogListRef);\n        return Object.assign(Object.assign({}, api), { dialogList: dialogListRef, dialogInstRefs,\n            handleAfterLeave });\n    },\n    render() {\n        var _a, _b;\n        return h(Fragment, null, [\n            this.dialogList.map((dialog) => h(NDialogEnvironment, omit(dialog, ['destroy', 'style'], {\n                internalStyle: dialog.style,\n                to: this.to,\n                ref: ((inst) => {\n                    if (inst === null) {\n                        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n                        delete this.dialogInstRefs[`n-dialog-${dialog.key}`];\n                    }\n                    else {\n                        this.dialogInstRefs[`n-dialog-${dialog.key}`] = inst;\n                    }\n                }),\n                internalKey: dialog.key,\n                onInternalAfterLeave: this.handleAfterLeave\n            }))),\n            (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a)\n        ]);\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}