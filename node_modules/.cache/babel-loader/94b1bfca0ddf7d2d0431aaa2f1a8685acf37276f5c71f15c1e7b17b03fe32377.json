{"ast":null,"code":"import { computed, defineComponent, h, ref } from 'vue';\nimport { off, on } from 'evtd';\nimport { toRgbaString } from 'seemly';\nimport { normalizeAlpha } from './utils';\nconst HANDLE_SIZE = '12px';\nconst HANDLE_SIZE_NUM = 12;\nconst RADIUS = '6px';\nexport default defineComponent({\n  name: 'AlphaSlider',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    rgba: {\n      type: Array,\n      default: null\n    },\n    alpha: {\n      type: Number,\n      default: 0\n    },\n    onUpdateAlpha: {\n      type: Function,\n      required: true\n    },\n    onComplete: Function\n  },\n  setup(props) {\n    const railRef = ref(null);\n    function handleMouseDown(e) {\n      if (!railRef.value || !props.rgba) return;\n      on('mousemove', document, handleMouseMove);\n      on('mouseup', document, handleMouseUp);\n      handleMouseMove(e);\n    }\n    function handleMouseMove(e) {\n      const {\n        value: railEl\n      } = railRef;\n      if (!railEl) return;\n      const {\n        width,\n        left\n      } = railEl.getBoundingClientRect();\n      const newAlpha = (e.clientX - left) / (width - HANDLE_SIZE_NUM);\n      props.onUpdateAlpha(normalizeAlpha(newAlpha));\n    }\n    function handleMouseUp() {\n      var _a;\n      off('mousemove', document, handleMouseMove);\n      off('mouseup', document, handleMouseUp);\n      (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n    return {\n      railRef,\n      railBackgroundImage: computed(() => {\n        const {\n          rgba\n        } = props;\n        if (!rgba) return '';\n        return `linear-gradient(to right, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 0) 0%, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 1) 100%)`;\n      }),\n      handleMouseDown\n    };\n  },\n  render() {\n    const {\n      clsPrefix\n    } = this;\n    return h(\"div\", {\n      class: `${clsPrefix}-color-picker-slider`,\n      ref: \"railRef\",\n      style: {\n        height: HANDLE_SIZE,\n        borderRadius: RADIUS\n      },\n      onMousedown: this.handleMouseDown\n    }, h(\"div\", {\n      style: {\n        borderRadius: RADIUS,\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        overflow: 'hidden'\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-checkboard`\n    }), h(\"div\", {\n      class: `${clsPrefix}-color-picker-slider__image`,\n      style: {\n        backgroundImage: this.railBackgroundImage\n      }\n    })), this.rgba && h(\"div\", {\n      style: {\n        position: 'absolute',\n        left: RADIUS,\n        right: RADIUS,\n        top: 0,\n        bottom: 0\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle`,\n      style: {\n        left: `calc(${this.alpha * 100}% - ${RADIUS})`,\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle__fill`,\n      style: {\n        backgroundColor: toRgbaString(this.rgba),\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    }))));\n  }\n});","map":{"version":3,"names":["computed","defineComponent","h","ref","off","on","toRgbaString","normalizeAlpha","HANDLE_SIZE","HANDLE_SIZE_NUM","RADIUS","name","props","clsPrefix","type","String","required","rgba","Array","default","alpha","Number","onUpdateAlpha","Function","onComplete","setup","railRef","handleMouseDown","e","value","document","handleMouseMove","handleMouseUp","railEl","width","left","getBoundingClientRect","newAlpha","clientX","_a","call","railBackgroundImage","render","class","style","height","borderRadius","onMousedown","position","right","top","bottom","overflow","backgroundImage","backgroundColor"],"sources":["/Users/elmo/Documents/GitHub/meetings_vue3/node_modules/naive-ui/es/color-picker/src/AlphaSlider.js"],"sourcesContent":["import { computed, defineComponent, h, ref } from 'vue';\nimport { off, on } from 'evtd';\nimport { toRgbaString } from 'seemly';\nimport { normalizeAlpha } from './utils';\nconst HANDLE_SIZE = '12px';\nconst HANDLE_SIZE_NUM = 12;\nconst RADIUS = '6px';\nexport default defineComponent({\n    name: 'AlphaSlider',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        rgba: {\n            type: Array,\n            default: null\n        },\n        alpha: {\n            type: Number,\n            default: 0\n        },\n        onUpdateAlpha: {\n            type: Function,\n            required: true\n        },\n        onComplete: Function\n    },\n    setup(props) {\n        const railRef = ref(null);\n        function handleMouseDown(e) {\n            if (!railRef.value || !props.rgba)\n                return;\n            on('mousemove', document, handleMouseMove);\n            on('mouseup', document, handleMouseUp);\n            handleMouseMove(e);\n        }\n        function handleMouseMove(e) {\n            const { value: railEl } = railRef;\n            if (!railEl)\n                return;\n            const { width, left } = railEl.getBoundingClientRect();\n            const newAlpha = (e.clientX - left) / (width - HANDLE_SIZE_NUM);\n            props.onUpdateAlpha(normalizeAlpha(newAlpha));\n        }\n        function handleMouseUp() {\n            var _a;\n            off('mousemove', document, handleMouseMove);\n            off('mouseup', document, handleMouseUp);\n            (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n        }\n        return {\n            railRef,\n            railBackgroundImage: computed(() => {\n                const { rgba } = props;\n                if (!rgba)\n                    return '';\n                return `linear-gradient(to right, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 0) 0%, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 1) 100%)`;\n            }),\n            handleMouseDown\n        };\n    },\n    render() {\n        const { clsPrefix } = this;\n        return (h(\"div\", { class: `${clsPrefix}-color-picker-slider`, ref: \"railRef\", style: {\n                height: HANDLE_SIZE,\n                borderRadius: RADIUS\n            }, onMousedown: this.handleMouseDown },\n            h(\"div\", { style: {\n                    borderRadius: RADIUS,\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    overflow: 'hidden'\n                } },\n                h(\"div\", { class: `${clsPrefix}-color-picker-checkboard` }),\n                h(\"div\", { class: `${clsPrefix}-color-picker-slider__image`, style: {\n                        backgroundImage: this.railBackgroundImage\n                    } })),\n            this.rgba && (h(\"div\", { style: {\n                    position: 'absolute',\n                    left: RADIUS,\n                    right: RADIUS,\n                    top: 0,\n                    bottom: 0\n                } },\n                h(\"div\", { class: `${clsPrefix}-color-picker-handle`, style: {\n                        left: `calc(${this.alpha * 100}% - ${RADIUS})`,\n                        borderRadius: RADIUS,\n                        width: HANDLE_SIZE,\n                        height: HANDLE_SIZE\n                    } },\n                    h(\"div\", { class: `${clsPrefix}-color-picker-handle__fill`, style: {\n                            backgroundColor: toRgbaString(this.rgba),\n                            borderRadius: RADIUS,\n                            width: HANDLE_SIZE,\n                            height: HANDLE_SIZE\n                        } }))))));\n    }\n});\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,eAAe,EAAEC,CAAC,EAAEC,GAAG,QAAQ,KAAK;AACvD,SAASC,GAAG,EAAEC,EAAE,QAAQ,MAAM;AAC9B,SAASC,YAAY,QAAQ,QAAQ;AACrC,SAASC,cAAc,QAAQ,SAAS;AACxC,MAAMC,WAAW,GAAG,MAAM;AAC1B,MAAMC,eAAe,GAAG,EAAE;AAC1B,MAAMC,MAAM,GAAG,KAAK;AACpB,eAAeT,eAAe,CAAC;EAC3BU,IAAI,EAAE,aAAa;EACnBC,KAAK,EAAE;IACHC,SAAS,EAAE;MACPC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACd,CAAC;IACDC,IAAI,EAAE;MACFH,IAAI,EAAEI,KAAK;MACXC,OAAO,EAAE;IACb,CAAC;IACDC,KAAK,EAAE;MACHN,IAAI,EAAEO,MAAM;MACZF,OAAO,EAAE;IACb,CAAC;IACDG,aAAa,EAAE;MACXR,IAAI,EAAES,QAAQ;MACdP,QAAQ,EAAE;IACd,CAAC;IACDQ,UAAU,EAAED;EAChB,CAAC;EACDE,KAAK,CAACb,KAAK,EAAE;IACT,MAAMc,OAAO,GAAGvB,GAAG,CAAC,IAAI,CAAC;IACzB,SAASwB,eAAe,CAACC,CAAC,EAAE;MACxB,IAAI,CAACF,OAAO,CAACG,KAAK,IAAI,CAACjB,KAAK,CAACK,IAAI,EAC7B;MACJZ,EAAE,CAAC,WAAW,EAAEyB,QAAQ,EAAEC,eAAe,CAAC;MAC1C1B,EAAE,CAAC,SAAS,EAAEyB,QAAQ,EAAEE,aAAa,CAAC;MACtCD,eAAe,CAACH,CAAC,CAAC;IACtB;IACA,SAASG,eAAe,CAACH,CAAC,EAAE;MACxB,MAAM;QAAEC,KAAK,EAAEI;MAAO,CAAC,GAAGP,OAAO;MACjC,IAAI,CAACO,MAAM,EACP;MACJ,MAAM;QAAEC,KAAK;QAAEC;MAAK,CAAC,GAAGF,MAAM,CAACG,qBAAqB,EAAE;MACtD,MAAMC,QAAQ,GAAG,CAACT,CAAC,CAACU,OAAO,GAAGH,IAAI,KAAKD,KAAK,GAAGzB,eAAe,CAAC;MAC/DG,KAAK,CAACU,aAAa,CAACf,cAAc,CAAC8B,QAAQ,CAAC,CAAC;IACjD;IACA,SAASL,aAAa,GAAG;MACrB,IAAIO,EAAE;MACNnC,GAAG,CAAC,WAAW,EAAE0B,QAAQ,EAAEC,eAAe,CAAC;MAC3C3B,GAAG,CAAC,SAAS,EAAE0B,QAAQ,EAAEE,aAAa,CAAC;MACvC,CAACO,EAAE,GAAG3B,KAAK,CAACY,UAAU,MAAM,IAAI,IAAIe,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACC,IAAI,CAAC5B,KAAK,CAAC;IAC/E;IACA,OAAO;MACHc,OAAO;MACPe,mBAAmB,EAAEzC,QAAQ,CAAC,MAAM;QAChC,MAAM;UAAEiB;QAAK,CAAC,GAAGL,KAAK;QACtB,IAAI,CAACK,IAAI,EACL,OAAO,EAAE;QACb,OAAQ,kCAAiCA,IAAI,CAAC,CAAC,CAAE,KAAIA,IAAI,CAAC,CAAC,CAAE,KAAIA,IAAI,CAAC,CAAC,CAAE,iBAAgBA,IAAI,CAAC,CAAC,CAAE,KAAIA,IAAI,CAAC,CAAC,CAAE,KAAIA,IAAI,CAAC,CAAC,CAAE,YAAW;MACxI,CAAC,CAAC;MACFU;IACJ,CAAC;EACL,CAAC;EACDe,MAAM,GAAG;IACL,MAAM;MAAE7B;IAAU,CAAC,GAAG,IAAI;IAC1B,OAAQX,CAAC,CAAC,KAAK,EAAE;MAAEyC,KAAK,EAAG,GAAE9B,SAAU,sBAAqB;MAAEV,GAAG,EAAE,SAAS;MAAEyC,KAAK,EAAE;QAC7EC,MAAM,EAAErC,WAAW;QACnBsC,YAAY,EAAEpC;MAClB,CAAC;MAAEqC,WAAW,EAAE,IAAI,CAACpB;IAAgB,CAAC,EACtCzB,CAAC,CAAC,KAAK,EAAE;MAAE0C,KAAK,EAAE;QACVE,YAAY,EAAEpC,MAAM;QACpBsC,QAAQ,EAAE,UAAU;QACpBb,IAAI,EAAE,CAAC;QACPc,KAAK,EAAE,CAAC;QACRC,GAAG,EAAE,CAAC;QACNC,MAAM,EAAE,CAAC;QACTC,QAAQ,EAAE;MACd;IAAE,CAAC,EACHlD,CAAC,CAAC,KAAK,EAAE;MAAEyC,KAAK,EAAG,GAAE9B,SAAU;IAA0B,CAAC,CAAC,EAC3DX,CAAC,CAAC,KAAK,EAAE;MAAEyC,KAAK,EAAG,GAAE9B,SAAU,6BAA4B;MAAE+B,KAAK,EAAE;QAC5DS,eAAe,EAAE,IAAI,CAACZ;MAC1B;IAAE,CAAC,CAAC,CAAC,EACb,IAAI,CAACxB,IAAI,IAAKf,CAAC,CAAC,KAAK,EAAE;MAAE0C,KAAK,EAAE;QACxBI,QAAQ,EAAE,UAAU;QACpBb,IAAI,EAAEzB,MAAM;QACZuC,KAAK,EAAEvC,MAAM;QACbwC,GAAG,EAAE,CAAC;QACNC,MAAM,EAAE;MACZ;IAAE,CAAC,EACHjD,CAAC,CAAC,KAAK,EAAE;MAAEyC,KAAK,EAAG,GAAE9B,SAAU,sBAAqB;MAAE+B,KAAK,EAAE;QACrDT,IAAI,EAAG,QAAO,IAAI,CAACf,KAAK,GAAG,GAAI,OAAMV,MAAO,GAAE;QAC9CoC,YAAY,EAAEpC,MAAM;QACpBwB,KAAK,EAAE1B,WAAW;QAClBqC,MAAM,EAAErC;MACZ;IAAE,CAAC,EACHN,CAAC,CAAC,KAAK,EAAE;MAAEyC,KAAK,EAAG,GAAE9B,SAAU,4BAA2B;MAAE+B,KAAK,EAAE;QAC3DU,eAAe,EAAEhD,YAAY,CAAC,IAAI,CAACW,IAAI,CAAC;QACxC6B,YAAY,EAAEpC,MAAM;QACpBwB,KAAK,EAAE1B,WAAW;QAClBqC,MAAM,EAAErC;MACZ;IAAE,CAAC,CAAC,CAAC,CAAE,CAAC;EAC5B;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}