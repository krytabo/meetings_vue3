{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// import memberDialog from \"@/components/memberDialog\";\nimport memberListDialogEven from \"@/components/memberListDialogEven\";\nimport { meetingList, userList } from \"@/views/config/api\";\nexport default {\n  name: \"HomeView\",\n  components: {\n    // memberDialog\n    memberListDialogEven\n  },\n  created() {\n    this.getApi();\n  },\n  data() {\n    return {\n      tableData: [{\n        date: \"2016-05-03\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1518 弄\"\n      }, {\n        date: \"2016-05-02\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1518 弄\"\n      }, {\n        date: \"2016-05-04\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1518 弄\"\n      }, {\n        date: \"2016-05-01\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1518 弄\"\n      }, {\n        date: \"2016-05-08\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1518 弄\"\n      }, {\n        date: \"2016-05-06\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1518 弄\"\n      }, {\n        date: \"2016-05-07\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1518 弄\"\n      }],\n      multipleSelection: [1, 2],\n      editForm: {\n        id: \"\",\n        countersign: \"\"\n      },\n      searchText: \"\",\n      inputContent: \"\",\n      dialogVisible: false,\n      wholeSearch: \"\",\n      currentPage: 1,\n      //默認顯示頁面為1\n      pageSize: 10,\n      //每頁顯示的數據\n      keywordSearch: \"\",\n      loading: true,\n      loadingData: 0,\n      color: \"#673ab7\",\n      dateSearch: \"\",\n      typeSelect: [{\n        text: \"專案\",\n        value: \"專案\"\n      }, {\n        text: \"例行性會議\",\n        value: \"例行性會議\"\n      }, {\n        text: \"建築行政\",\n        value: \"建築行政\"\n      }, {\n        text: \"一般行政\",\n        value: \"一般行政\"\n      }],\n      //類型選單\n      approvalsSelect: [{\n        value: \"待送簽\" //負責人是本人的狀態下出現「送簽按鈕」\n      }, {\n        value: \"待簽核\" //已送簽，主管未簽核\n      }, {\n        value: \"已簽核\"\n      }],\n      //簽核狀態選單\n      dataList: [],\n      memberList: [],\n      countersignEdit: false,\n      //編輯會辦人員\n      /** 表頭搜尋 */\n      search: {\n        type: \"\",\n        name: \"\",\n        theme: \"\",\n        principalName: \"\",\n        principalDepartment: \"\",\n        chairman: \"\",\n        member: \"\",\n        approvals: \"\",\n        remark: \"\",\n        start: \"\",\n        end: \"\"\n      }\n    };\n  },\n  methods: {\n    getMember(val) {\n      this.memberSearch = val;\n    },\n    // 獲取API\n    getApi() {\n      meetingList().then(res => {\n        this.dataList = res.data;\n      });\n      userList().then(res => {\n        this.memberList = res.data;\n      });\n      setTimeout(() => {\n        if (this.loadingData === 100) {\n          this.loading = false;\n        }\n      }, 1500);\n    },\n    Edit_PricingList(index, result) {\n      let data = JSON.stringify(result);\n      this.$router.push({\n        path: \"editMeeting\",\n        query: {\n          res: data,\n          editStatus: true\n        }\n      });\n    },\n    View_PricingList(index, result) {\n      let data = JSON.stringify(result);\n      this.$router.push({\n        path: \"editMeeting\",\n        query: {\n          res: data,\n          editStatus: false\n        }\n      });\n    },\n    add() {\n      this.$router.push({\n        name: \"addMeeting\"\n      });\n    },\n    getTime(val) {\n      //   獲取時間並格式化\n      var now = new Date();\n      val === 0 ? \"\" : now.setTime(now.getTime() - 24 * 60 * 60 * 1000 * val); //   獲取前val天的時間\n      // val === 0 ? \"\" : now.setTime(now.getTime() + 24 * 60 * 60 * 1000 * val); //   獲取後val天的時間\n      const hh = (now.getHours() + \"\").padStart(2, \"0\");\n      const mm = (now.getMinutes() + \"\").padStart(2, \"0\");\n      const ss = (now.getSeconds() + \"\").padStart(2, \"0\");\n      //獲取當前的星期\n      let wk = now.getDay();\n      let weeks = [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\"];\n      let week = weeks[wk];\n      this.form.time = week;\n      return `${hh}:${mm}:${ss}`; // 獲取的時間格式為 2021-11-16 11:37:15\n      //return `${y}年${m}月${d}日 ${hh}:${mm}:${ss}`; // 獲取的時間格式為 2021年11月16日 11:37:15\n      // return `${y}-${m}-${d} ${hh}:${mm}:${ss}`; // 獲取的時間格式為 2021-04-09 11:37:15\n      // return y + m + d                           // 獲取的時間格式為  20210409\n    },\n\n    // 送簽\n    sendPetition(index, row) {\n      console.log(row);\n      this.$swal.fire({\n        title: \"你確定嗎？\",\n        text: \"即將送出簽核\",\n        icon: \"warning\",\n        showCancelButton: true,\n        cancelButtonColor: \"#0084ff\",\n        confirmButtonColor: \"#cccccc\",\n        confirmButtonText: \"確定送出\",\n        cancelButtonText: \"取消\",\n        closeOnConfirm: false\n      });\n    },\n    /** 會辦 */\n    // 會辦人員按鈕\n    /*sendCountersign(row) {\n      this.dialogVisible = true;\n      this.editForm = Object.assign({}, row);\n      console.log(row);\n    },*/\n    sendCountersign(row) {\n      this.dialogVisible = true;\n      this.editForm = row;\n    },\n    // 會辦畫面選擇對象\n    select(val) {\n      /*for (let i = 0; i < val.length; i++) {\n        this.editForm.countersign[i] = val[i].name;\n      }*/\n      this.editForm.countersign = val;\n      console.log(this.editForm.countersign);\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n      console.log(this.multipleSelection);\n    },\n    //開啟會辦選擇視窗\n    edit_countersign(index, row) {\n      // this.countersignEdit = true;\n      this.dialogVisible = true;\n      this.editForm = row;\n      this.$nextTick(() => {\n        this.memberList.forEach(item => {\n          this.editForm.countersign.forEach(subItem => {\n            if (item.id == subItem) {\n              this.$refs.multipleTable.toggleRowSelection(item);\n            }\n          });\n        });\n      });\n    },\n    // 送出確定會辦人員\n    save_countersign() {\n      let id = this.editForm.id;\n      let obj = this.editForm;\n      this.axios.patch(\"http://localhost:3000/meetingList/\" + `${id}`, obj).then(response => {\n        this.editForm.id = response.data.id;\n        this.getApi();\n        this.dialogVisible = false;\n      }).catch(error => {\n        console.error(\"There was an error!\", error);\n      });\n      this.countersignEdit = false;\n    },\n    childClick() {\n      let id = this.editForm.id;\n      let obj = this.editForm;\n      this.axios.patch(\"http://localhost:3000/meetingList/\" + `${id}`, obj).then(response => {\n        this.editForm.id = response.data.id;\n        this.getApi();\n        this.dialogVisible = false;\n      }).catch(error => {\n        console.error(\"There was an error!\", error);\n      });\n    },\n    // 套件送出會辦\n    childByValue(childValue) {\n      // this.inputContent = childValue;\n      this.dataList.countersign = childValue;\n      this.dialogVisible = false;\n      this.test = \"\";\n    },\n    handerMethod({\n      row,\n      columnIndex\n    }) {\n      if (row[0].level === 1) {\n        row[8].colSpan = 2;\n        row[9].colSpan = 0;\n        if (columnIndex === 9) {\n          return {\n            display: \"none\"\n          };\n        }\n      }\n    },\n    // 搜尋高光\n    showDate(val) {\n      val = val + \"\";\n      if (val.indexOf(this.wholeSearch) !== -1 && this.wholeSearch !== \"\") {\n        return val.replace(this.wholeSearch, '<span style=\"color: #000; background: gold\">' + this.wholeSearch + \"</span>\");\n      } else {\n        return val;\n      }\n    },\n    // table下拉篩選\n    filterHandler(value, row, column) {\n      const property = column[\"property\"];\n      return row[property] === value;\n    },\n    //每頁下拉數據\n    handleSizeChange: function (size) {\n      this.pageSize = size;\n    },\n    //點擊第幾頁\n    handleCurrentChange: function (currentPage) {\n      this.currentPage = currentPage;\n    },\n    // 單筆刪除\n    handleDelete(index, row) {\n      this.configForm = row;\n      const id = this.configForm.id;\n      this.$swal.fire({\n        title: \"你確定嗎？\",\n        text: \"資料刪除後將無法復原\",\n        icon: \"warning\",\n        showCancelButton: true,\n        cancelButtonColor: \"#0084ff\",\n        confirmButtonColor: \"#cccccc\",\n        confirmButtonText: \"確定刪除\",\n        cancelButtonText: \"取消\",\n        closeOnConfirm: false\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.axios.delete(\"http://localhost:3000/configForm/\" + `${id}`, row).then(response => {\n            this.configForm.id = response.data.id;\n            this.getApi();\n          }).catch(error => {\n            console.error(\"There was an error!\", error);\n          });\n        }\n      }).catch(() => {});\n    },\n    //日期區間搜尋使用\n    localizeDate(date) {\n      if (!date || !date.includes(\"-\")) return date;\n      const [yyyy, mm, dd] = date.split(\"-\");\n      return new Date(`${mm}/${dd}/${yyyy}`);\n    }\n  },\n  computed: {\n    // 搜尋\n    tables() {\n      const search = this.wholeSearch;\n      const search2 = this.search.type;\n      const search3 = this.search.name;\n      const search4 = this.search.theme;\n      const search5 = this.search.principalName;\n      const search6 = this.search.principalDepartment;\n      const search7 = this.search.member;\n      const search8 = this.search.approvals;\n      const search10 = this.search.remark;\n      if (search) {\n        return this.dataList.filter(data => {\n          return Object.keys(data).some(key => {\n            // return String(data[key]).toLowerCase().indexOf(search) > -1;\n            return String(data[key]).toLowerCase().includes(search.toLowerCase());\n          });\n        });\n      } else if (search2) {\n        return this.dataList.filter(data => {\n          return String(data.type).toLowerCase().includes(search2.toLowerCase());\n        });\n      } else if (search3) {\n        return this.dataList.filter(data => {\n          return String(data.name).toLowerCase().includes(search3.toLowerCase());\n        });\n      } else if (search4) {\n        return this.dataList.filter(data => {\n          return String(data.theme).toLowerCase().includes(search4.toLowerCase());\n        });\n      } else if (search5) {\n        return this.dataList.filter(data => {\n          return String(data.principal.name).toLowerCase().includes(search5.toLowerCase());\n        });\n      } else if (search6) {\n        return this.dataList.filter(data => {\n          return String(data.principal.department).toLowerCase().includes(search6.toLowerCase());\n        });\n      } else if (search7) {\n        return this.dataList.filter(data => {\n          return String(data.member).toLowerCase().includes(search7.toLowerCase());\n        });\n      } else if (search8) {\n        return this.dataList.filter(data => {\n          return String(data.approvals).toLowerCase().includes(search8.toLowerCase());\n        });\n      } else if (search10) {\n        return this.dataList.filter(data => {\n          return String(data.remark).toLowerCase().includes(search10.toLowerCase());\n        });\n      } else {\n        const startDone = this.localizeDate(this.search.start);\n        const endDone = this.localizeDate(this.search.end);\n        return this.dataList.filter(item => {\n          const itemDate = new Date(item.date);\n          if (startDone && endDone) {\n            return startDone <= itemDate && itemDate <= endDone;\n          }\n          if (startDone && !endDone) {\n            return startDone <= itemDate;\n          }\n          if (!startDone && endDone) {\n            return itemDate <= endDone;\n          }\n          return true;\n        });\n      }\n\n      // return this.dataList;\n    }\n  },\n\n  watch: {},\n  mounted() {}\n};","map":{"version":3,"mappings":"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","names":["memberListDialogEven","meetingList","userList","name","components","created","getApi","data","tableData","date","address","multipleSelection","editForm","id","countersign","searchText","inputContent","dialogVisible","wholeSearch","currentPage","pageSize","keywordSearch","loading","loadingData","color","dateSearch","typeSelect","text","value","approvalsSelect","dataList","memberList","countersignEdit","search","type","theme","principalName","principalDepartment","chairman","member","approvals","remark","start","end","methods","getMember","val","memberSearch","then","res","setTimeout","Edit_PricingList","index","result","JSON","stringify","$router","push","path","query","editStatus","View_PricingList","add","getTime","now","Date","setTime","hh","getHours","padStart","mm","getMinutes","ss","getSeconds","wk","getDay","weeks","week","form","time","sendPetition","row","console","log","$swal","fire","title","icon","showCancelButton","cancelButtonColor","confirmButtonColor","confirmButtonText","cancelButtonText","closeOnConfirm","sendCountersign","select","handleSelectionChange","edit_countersign","$nextTick","forEach","item","subItem","$refs","multipleTable","toggleRowSelection","save_countersign","obj","axios","patch","response","catch","error","childClick","childByValue","childValue","test","handerMethod","columnIndex","level","colSpan","display","showDate","indexOf","replace","filterHandler","column","property","handleSizeChange","size","handleCurrentChange","handleDelete","configForm","isConfirmed","delete","localizeDate","includes","yyyy","dd","split","computed","tables","search2","search3","search4","search5","search6","search7","search8","search10","filter","Object","keys","some","key","String","toLowerCase","principal","department","startDone","endDone","itemDate","watch","mounted"],"sourceRoot":"","sources":["/Users/elmo/Documents/GitHub/meetings_vue3/src/views/MeetingList.vue"],"sourcesContent":["<template>\n  <div class=\"meeting_list h-full w-full p-5\">\n    <!--<load-view :loading=\"loading\" :progress-data=\"loadingData\" :color=\"color\"></load-view>-->\n    <div class=\"flex-col space-y-10 rounded-xl bg-white p-10 shadow-6\">\n      <!--標題-->\n      <div class=\"title-before mb-5 flex border-b border-b-gray-300 pb-5\">\n        <div class=\"flex flex-1 space-x-2\">\n          <a-button type=\"primary\" @click=\"add\">新增會議記錄</a-button>\n          <a-button type=\"primary\" @click=\"add\">個人會辦</a-button>\n          <a-button type=\"primary\" status=\"success\">匯出資料</a-button>\n        </div>\n        <div class=\"inline-block flex items-center space-x-4\">\n          <div class=\"flex-1 text-right\">快速搜尋：</div>\n          <el-input v-model=\"wholeSearch\" placeholder=\"請輸入關鍵字\" class=\"flex-1\"></el-input>\n        </div>\n      </div>\n\n      <!--表格-->\n      <el-table :data=\"tables.slice((currentPage - 1) * pageSize, currentPage * pageSize)\" ref=\"multipleTable\" style=\"width: 100%\">\n        <el-table-column label=\"類型\" prop=\"type\" sortable>\n          <el-table-column prop=\"type\">\n            <template #header>\n              <el-select v-model=\"search.type\" size=\"mini\" placeholder=\"請選擇\" clearable>\n                <el-option v-for=\"item in typeSelect\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\n              </el-select>\n            </template>\n            <template #default=\"scope\">\n              <span v-html=\"showDate(scope.row.type)\"></span>\n            </template>\n          </el-table-column>\n        </el-table-column>\n        <el-table-column label=\"專案編碼及名稱\" prop=\"name\" sortable>\n          <el-table-column prop=\"name\" show-overflow-tooltip>\n            <template #header>\n              <el-input placeholder=\"關鍵字\" v-model=\"search.name\"></el-input>\n            </template>\n            <template #default=\"scope\">\n              <span class=\"truncate\" v-html=\"showDate(scope.row.name)\"></span>\n            </template>\n          </el-table-column>\n        </el-table-column>\n        <el-table-column label=\"會議主題\" prop=\"theme\" sortable>\n          <el-table-column prop=\"theme\">\n            <template #header>\n              <el-input placeholder=\"關鍵字\" v-model=\"search.theme\"></el-input>\n            </template>\n            <template #default=\"scope\">\n              <span v-html=\"showDate(scope.row.theme)\"></span>\n            </template>\n          </el-table-column>\n        </el-table-column>\n        <el-table-column label=\"會議日期\" prop=\"date\" sortable>\n          <el-table-column prop=\"date\">\n            <template #header>\n              <a-trigger trigger=\"click\" :unmount-on-close=\"false\">\n                <el-button class=\"w-full\">日期搜尋</el-button>\n                <template #content>\n                  <div class=\"demo-basic rounded-md border border-gray-200 bg-white p-2 shadow-xl\">\n                    <el-date-picker v-model=\"search.start\" type=\"date\" placeholder=\"開始\" value-format=\"YYYY-MM-DD\"></el-date-picker>\n                    <el-date-picker v-model=\"search.end\" type=\"date\" placeholder=\"結束\" value-format=\"YYYY-MM-DD\"></el-date-picker>\n                  </div>\n                </template>\n              </a-trigger>\n            </template>\n            <template #default=\"scope\">\n              <span v-html=\"showDate(scope.row.date)\"></span>\n            </template>\n          </el-table-column>\n        </el-table-column>\n        <el-table-column label=\"負責人員\" prop=\"principal\" sortable>\n          <el-table-column prop=\"principal\">\n            <template #header>\n              <el-input placeholder=\"關鍵字\" v-model=\"search.principalName\"></el-input>\n            </template>\n            <template #default=\"scope\">\n              <span v-html=\"showDate(scope.row.principal.name)\"></span>\n            </template>\n          </el-table-column>\n        </el-table-column>\n        <el-table-column label=\"部門\" prop=\"chairman\" sortable>\n          <el-table-column prop=\"chairman\">\n            <template #header>\n              <el-input placeholder=\"關鍵字\" v-model=\"search.principalDepartment\"></el-input>\n            </template>\n            <template #default=\"scope\">\n              <span v-html=\"showDate(scope.row.principal.department)\"></span>\n            </template>\n          </el-table-column>\n        </el-table-column>\n        <el-table-column label=\"出席人員\" prop=\"member\" sortable>\n          <el-table-column prop=\"member\" width=\"130\" show-overflow-tooltip>\n            <template #header>\n              <el-input placeholder=\"關鍵字\" v-model=\"search.member\"></el-input>\n            </template>\n            <template #default=\"scope\">\n              <span class=\"truncate\" v-html=\"showDate(scope.row.member)\"></span>\n            </template>\n          </el-table-column>\n        </el-table-column>\n        <el-table-column label=\"簽核\" prop=\"approvals\" sortable>\n          <el-table-column prop=\"approvals\" min-width=\"110\">\n            <template #header>\n              <el-select v-model=\"search.approvals\" size=\"mini\" placeholder=\"請選擇\" clearable>\n                <el-option v-for=\"item in approvalsSelect\" :key=\"item.value\" :label=\"item.value\" :value=\"item.value\"></el-option>\n              </el-select>\n            </template>\n            <template #default=\"scope\">\n              <a-tag v-if=\"scope.row.approvals === '已簽核'\" color=\"arcoblue\" v-html=\"showDate(scope.row.approvals)\"></a-tag>\n              <div v-else-if=\"scope.row.approvals === '待送簽'\" class=\"flex items-center space-x-2\">\n                <a-tag v-show=\"scope.row.approvals === '待送簽'\" color=\"red\" v-html=\"showDate(scope.row.approvals)\"></a-tag>\n                <a-button v-show=\"scope.row.approvals === '待送簽' && scope.row.principal.name === '王大明'\" type=\"primary\" @click=\"sendPetition(scope.row)\">送簽</a-button>\n              </div>\n              <a-tag v-else color=\"purple\" v-html=\"showDate(scope.row.approvals)\"></a-tag>\n            </template>\n          </el-table-column>\n        </el-table-column>\n        <el-table-column label=\"會辦\" prop=\"countersign\">\n          <el-table-column show-overflow-tooltip min-width=\"150\">\n            <!--<template #header>\n              <a-button type=\"primary\" status=\"success\" v-show=\"countersignEdit === false\" @click=\"countersignEdit = true\">編輯</a-button>\n              <a-button type=\"primary\" status=\"success\" v-show=\"countersignEdit === true\" @click=\"save_countersign\">存檔</a-button>\n            </template>-->\n            <template #default=\"scope\">\n              <div class=\"flex space-x-3 truncate\">\n                <a-button type=\"primary\" status=\"success\" v-show=\"countersignEdit === false\" @click=\"edit_countersign(scope.$index, scope.row)\">編輯</a-button>\n                <a-button type=\"primary\" status=\"success\" v-show=\"countersignEdit === true\" @click=\"save_countersign\">存檔</a-button>\n                <!--<a-button type=\"primary\" @click=\"sendCountersign(scope.row)\">會辦人員</a-button>-->\n                <member-list-dialog-even v-if=\"countersignEdit === true\" v-model=\"scope.row.countersign\" :value=\"scope.row.countersign\" disabled=\"false\"></member-list-dialog-even>\n                <div v-else class=\"truncate\">\n                  <span v-for=\"item in scope.row.countersign\" :key=\"item.id\">{{ item.name }}</span>\n                  <!--<span>{{ scope.row.countersign.toString() }}</span>-->\n                </div>\n              </div>\n            </template>\n          </el-table-column>\n        </el-table-column>\n        <!--<el-table-column label=\"會辦人員\" prop=\"countersign\">\n          <el-table-column prop=\"countersign\" width=\"130\" show-overflow-tooltip>\n            <template #default=\"scope\">\n              <div class=\"truncate\">\n                <span v-for=\"item in scope.row.countersign\" :key=\"item.id\">{{ item.name }},</span>\n              </div>\n            </template>\n          </el-table-column>\n        </el-table-column>-->\n        <el-table-column label=\"備註\" prop=\"remark\" sortable>\n          <el-table-column prop=\"remark\" show-overflow-tooltip>\n            <template #header>\n              <el-input placeholder=\"關鍵字\" v-model=\"search.remark\"></el-input>\n            </template>\n            <template #default=\"scope\">\n              <span v-if=\"scope.row.remark === ''\">無</span>\n              <span v-else class=\"truncate\" v-html=\"showDate(scope.row.remark)\"></span>\n            </template>\n          </el-table-column>\n        </el-table-column>\n        <el-table-column label=\"編修\" align=\"center\" fixed=\"right\" width=\"100\">\n          <template #header>\n            <div class=\"w-full text-center\">編修</div>\n          </template>\n          <template #default=\"scope\">\n            <!--待送簽僅負責人可以修改-->\n            <a-button v-if=\"scope.row.approvals === '待送簽' && scope.row.principal.name === '王大明'\" type=\"text\" class=\"ml-0 w-full\" @click=\"Edit_PricingList(scope.$index, scope.row)\">\n              修改\n              <i class=\"ri-pencil-fill\"></i>\n            </a-button>\n\n            <!--部門主管可以修改未簽核的所有事件-->\n            <a-button v-if=\"scope.row.approvals !== '已簽核' && scope.row.principal.department === '建一部2'\" type=\"text\" class=\"ml-0 w-full\" @click=\"Edit_PricingList(scope.$index, scope.row)\">\n              修改\n              <i class=\"ri-pencil-fill\"></i>\n            </a-button>\n\n            <!--已簽核即無法修改-->\n            <a-button v-else type=\"text\" status=\"success\" class=\"ml-0 w-full\" @click=\"View_PricingList(scope.$index, scope.row)\">\n              檢視\n              <i class=\"ri-eye-fill\"></i>\n            </a-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!--分頁-->\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"currentPage\"\n        :page-sizes=\"[5, 10, 20, 40]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes,prev, pager, next\"\n        :total=\"dataList.length\"\n        prev-text=\"上一頁\"\n        next-text=\"下一頁\"\n      ></el-pagination>\n    </div>\n  </div>\n  <el-dialog title=\"選擇人員\" draggable v-model=\"dialogVisible\">\n    <div class=\"flax space-x-4\">\n      <div class=\"\"></div>\n      <el-table ref=\"multipleTable\" :data=\"memberList\" @selection-change=\"select\">\n        <el-table-column type=\"selection\" width=\"50\"></el-table-column>\n        <el-table-column label=\"編號\" prop=\"id\"></el-table-column>\n        <el-table-column label=\"姓名\" prop=\"name\"></el-table-column>\n        <el-table-column label=\"部門\" prop=\"department\"></el-table-column>\n      </el-table>\n    </div>\n\n    <el-input v-model=\"editForm.id\"></el-input>\n    <el-input v-model=\"editForm.countersign\"></el-input>\n    {{ editForm.countersign }}\n    <el-button @click=\"childClick\">確定</el-button>\n  </el-dialog>\n  <!--  <memberDialog v-model=\"dialogVisible\" :inputName=\"test\" v-on:childByValue=\"childByValue\"></memberDialog>-->\n</template>\n\n<script>\n// import memberDialog from \"@/components/memberDialog\";\nimport memberListDialogEven from \"@/components/memberListDialogEven\";\nimport { meetingList, userList } from \"@/views/config/api\";\nexport default {\n  name: \"HomeView\",\n  components: {\n    // memberDialog\n    memberListDialogEven,\n  },\n  created() {\n    this.getApi();\n  },\n  data() {\n    return {\n      tableData: [\n        {\n          date: \"2016-05-03\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1518 弄\",\n        },\n        {\n          date: \"2016-05-02\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1518 弄\",\n        },\n        {\n          date: \"2016-05-04\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1518 弄\",\n        },\n        {\n          date: \"2016-05-01\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1518 弄\",\n        },\n        {\n          date: \"2016-05-08\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1518 弄\",\n        },\n        {\n          date: \"2016-05-06\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1518 弄\",\n        },\n        {\n          date: \"2016-05-07\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1518 弄\",\n        },\n      ],\n      multipleSelection: [1, 2],\n\n      editForm: {\n        id: \"\",\n        countersign: \"\",\n      },\n      searchText: \"\",\n      inputContent: \"\",\n      dialogVisible: false,\n      wholeSearch: \"\",\n      currentPage: 1, //默認顯示頁面為1\n      pageSize: 10, //每頁顯示的數據\n      keywordSearch: \"\",\n      loading: true,\n      loadingData: 0,\n      color: \"#673ab7\",\n\n      dateSearch: \"\",\n      typeSelect: [\n        {\n          text: \"專案\",\n          value: \"專案\",\n        },\n        {\n          text: \"例行性會議\",\n          value: \"例行性會議\",\n        },\n        {\n          text: \"建築行政\",\n          value: \"建築行政\",\n        },\n        {\n          text: \"一般行政\",\n          value: \"一般行政\",\n        },\n      ], //類型選單\n      approvalsSelect: [\n        {\n          value: \"待送簽\", //負責人是本人的狀態下出現「送簽按鈕」\n        },\n        {\n          value: \"待簽核\", //已送簽，主管未簽核\n        },\n        {\n          value: \"已簽核\",\n        },\n      ], //簽核狀態選單\n      dataList: [],\n      memberList: [],\n      countersignEdit: false, //編輯會辦人員\n      /** 表頭搜尋 */\n      search: {\n        type: \"\",\n        name: \"\",\n        theme: \"\",\n        principalName: \"\",\n        principalDepartment: \"\",\n        chairman: \"\",\n        member: \"\",\n        approvals: \"\",\n        remark: \"\",\n        start: \"\",\n        end: \"\",\n      },\n    };\n  },\n  methods: {\n    getMember(val) {\n      this.memberSearch = val;\n    },\n    // 獲取API\n    getApi() {\n      meetingList().then((res) => {\n        this.dataList = res.data;\n      });\n      userList().then((res) => {\n        this.memberList = res.data;\n      });\n      setTimeout(() => {\n        if (this.loadingData === 100) {\n          this.loading = false;\n        }\n      }, 1500);\n    },\n\n    Edit_PricingList(index, result) {\n      let data = JSON.stringify(result);\n      this.$router.push({ path: \"editMeeting\", query: { res: data, editStatus: true } });\n    },\n\n    View_PricingList(index, result) {\n      let data = JSON.stringify(result);\n      this.$router.push({ path: \"editMeeting\", query: { res: data, editStatus: false } });\n    },\n\n    add() {\n      this.$router.push({ name: \"addMeeting\" });\n    },\n\n    getTime(val) {\n      //   獲取時間並格式化\n      var now = new Date();\n      val === 0 ? \"\" : now.setTime(now.getTime() - 24 * 60 * 60 * 1000 * val); //   獲取前val天的時間\n      // val === 0 ? \"\" : now.setTime(now.getTime() + 24 * 60 * 60 * 1000 * val); //   獲取後val天的時間\n      const hh = (now.getHours() + \"\").padStart(2, \"0\");\n      const mm = (now.getMinutes() + \"\").padStart(2, \"0\");\n      const ss = (now.getSeconds() + \"\").padStart(2, \"0\");\n      //獲取當前的星期\n      let wk = now.getDay();\n      let weeks = [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\"];\n      let week = weeks[wk];\n      this.form.time = week;\n      return `${hh}:${mm}:${ss}`; // 獲取的時間格式為 2021-11-16 11:37:15\n      //return `${y}年${m}月${d}日 ${hh}:${mm}:${ss}`; // 獲取的時間格式為 2021年11月16日 11:37:15\n      // return `${y}-${m}-${d} ${hh}:${mm}:${ss}`; // 獲取的時間格式為 2021-04-09 11:37:15\n      // return y + m + d                           // 獲取的時間格式為  20210409\n    },\n\n    // 送簽\n    sendPetition(index, row) {\n      console.log(row);\n      this.$swal.fire({\n        title: \"你確定嗎？\",\n        text: \"即將送出簽核\",\n        icon: \"warning\",\n        showCancelButton: true,\n        cancelButtonColor: \"#0084ff\",\n        confirmButtonColor: \"#cccccc\",\n        confirmButtonText: \"確定送出\",\n        cancelButtonText: \"取消\",\n        closeOnConfirm: false,\n      });\n    },\n\n    /** 會辦 */\n    // 會辦人員按鈕\n    /*sendCountersign(row) {\n      this.dialogVisible = true;\n      this.editForm = Object.assign({}, row);\n      console.log(row);\n    },*/\n    sendCountersign(row) {\n      this.dialogVisible = true;\n      this.editForm = row;\n    },\n\n    // 會辦畫面選擇對象\n    select(val) {\n      /*for (let i = 0; i < val.length; i++) {\n        this.editForm.countersign[i] = val[i].name;\n      }*/\n      this.editForm.countersign = val;\n      console.log(this.editForm.countersign);\n    },\n\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n      console.log(this.multipleSelection);\n    },\n\n    //開啟會辦選擇視窗\n    edit_countersign(index, row) {\n      // this.countersignEdit = true;\n      this.dialogVisible = true;\n      this.editForm = row;\n\n      this.$nextTick(() => {\n        this.memberList.forEach((item) => {\n          this.editForm.countersign.forEach((subItem) => {\n            if (item.id == subItem) {\n              this.$refs.multipleTable.toggleRowSelection(item);\n            }\n          });\n        });\n      });\n    },\n    // 送出確定會辦人員\n    save_countersign() {\n      let id = this.editForm.id;\n      let obj = this.editForm;\n      this.axios\n        .patch(\"http://localhost:3000/meetingList/\" + `${id}`, obj)\n        .then((response) => {\n          this.editForm.id = response.data.id;\n          this.getApi();\n          this.dialogVisible = false;\n        })\n        .catch((error) => {\n          console.error(\"There was an error!\", error);\n        });\n\n      this.countersignEdit = false;\n    },\n    childClick() {\n      let id = this.editForm.id;\n      let obj = this.editForm;\n      this.axios\n        .patch(\"http://localhost:3000/meetingList/\" + `${id}`, obj)\n        .then((response) => {\n          this.editForm.id = response.data.id;\n          this.getApi();\n          this.dialogVisible = false;\n        })\n        .catch((error) => {\n          console.error(\"There was an error!\", error);\n        });\n    },\n\n    // 套件送出會辦\n    childByValue(childValue) {\n      // this.inputContent = childValue;\n      this.dataList.countersign = childValue;\n      this.dialogVisible = false;\n      this.test = \"\";\n    },\n\n    handerMethod({ row, columnIndex }) {\n      if (row[0].level === 1) {\n        row[8].colSpan = 2;\n        row[9].colSpan = 0;\n        if (columnIndex === 9) {\n          return { display: \"none\" };\n        }\n      }\n    },\n    // 搜尋高光\n    showDate(val) {\n      val = val + \"\";\n      if (val.indexOf(this.wholeSearch) !== -1 && this.wholeSearch !== \"\") {\n        return val.replace(this.wholeSearch, '<span style=\"color: #000; background: gold\">' + this.wholeSearch + \"</span>\");\n      } else {\n        return val;\n      }\n    },\n\n    // table下拉篩選\n    filterHandler(value, row, column) {\n      const property = column[\"property\"];\n      return row[property] === value;\n    },\n\n    //每頁下拉數據\n    handleSizeChange: function (size) {\n      this.pageSize = size;\n    },\n\n    //點擊第幾頁\n    handleCurrentChange: function (currentPage) {\n      this.currentPage = currentPage;\n    },\n\n    // 單筆刪除\n    handleDelete(index, row) {\n      this.configForm = row;\n      const id = this.configForm.id;\n\n      this.$swal\n        .fire({\n          title: \"你確定嗎？\",\n          text: \"資料刪除後將無法復原\",\n          icon: \"warning\",\n          showCancelButton: true,\n          cancelButtonColor: \"#0084ff\",\n          confirmButtonColor: \"#cccccc\",\n          confirmButtonText: \"確定刪除\",\n          cancelButtonText: \"取消\",\n          closeOnConfirm: false,\n        })\n        .then((result) => {\n          if (result.isConfirmed) {\n            this.axios\n              .delete(\"http://localhost:3000/configForm/\" + `${id}`, row)\n              .then((response) => {\n                this.configForm.id = response.data.id;\n                this.getApi();\n              })\n              .catch((error) => {\n                console.error(\"There was an error!\", error);\n              });\n          }\n        })\n        .catch(() => {});\n    },\n\n    //日期區間搜尋使用\n    localizeDate(date) {\n      if (!date || !date.includes(\"-\")) return date;\n      const [yyyy, mm, dd] = date.split(\"-\");\n      return new Date(`${mm}/${dd}/${yyyy}`);\n    },\n  },\n  computed: {\n    // 搜尋\n    tables() {\n      const search = this.wholeSearch;\n      const search2 = this.search.type;\n      const search3 = this.search.name;\n      const search4 = this.search.theme;\n      const search5 = this.search.principalName;\n      const search6 = this.search.principalDepartment;\n      const search7 = this.search.member;\n      const search8 = this.search.approvals;\n      const search10 = this.search.remark;\n\n      if (search) {\n        return this.dataList.filter((data) => {\n          return Object.keys(data).some((key) => {\n            // return String(data[key]).toLowerCase().indexOf(search) > -1;\n            return String(data[key]).toLowerCase().includes(search.toLowerCase());\n          });\n        });\n      } else if (search2) {\n        return this.dataList.filter((data) => {\n          return String(data.type).toLowerCase().includes(search2.toLowerCase());\n        });\n      } else if (search3) {\n        return this.dataList.filter((data) => {\n          return String(data.name).toLowerCase().includes(search3.toLowerCase());\n        });\n      } else if (search4) {\n        return this.dataList.filter((data) => {\n          return String(data.theme).toLowerCase().includes(search4.toLowerCase());\n        });\n      } else if (search5) {\n        return this.dataList.filter((data) => {\n          return String(data.principal.name).toLowerCase().includes(search5.toLowerCase());\n        });\n      } else if (search6) {\n        return this.dataList.filter((data) => {\n          return String(data.principal.department).toLowerCase().includes(search6.toLowerCase());\n        });\n      } else if (search7) {\n        return this.dataList.filter((data) => {\n          return String(data.member).toLowerCase().includes(search7.toLowerCase());\n        });\n      } else if (search8) {\n        return this.dataList.filter((data) => {\n          return String(data.approvals).toLowerCase().includes(search8.toLowerCase());\n        });\n      } else if (search10) {\n        return this.dataList.filter((data) => {\n          return String(data.remark).toLowerCase().includes(search10.toLowerCase());\n        });\n      } else {\n        const startDone = this.localizeDate(this.search.start);\n        const endDone = this.localizeDate(this.search.end);\n        return this.dataList.filter((item) => {\n          const itemDate = new Date(item.date);\n          if (startDone && endDone) {\n            return startDone <= itemDate && itemDate <= endDone;\n          }\n          if (startDone && !endDone) {\n            return startDone <= itemDate;\n          }\n          if (!startDone && endDone) {\n            return itemDate <= endDone;\n          }\n          return true;\n        });\n      }\n\n      // return this.dataList;\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n<style lang=\"scss\">\n.meeting_list {\n  .el-table {\n    .cell {\n      color: #1d2129;\n      display: flex;\n      align-items: center;\n    }\n    th.el-table__cell {\n      background-color: #f2f3f5 !important;\n    }\n  }\n\n  .el-table--border .el-table__cell {\n    border-right: none !important;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}