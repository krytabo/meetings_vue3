{"ast":null,"code":"import { computed, defineComponent, h, inject, provide, ref } from 'vue';\nimport { renderArrow } from '../../popover/src/PopoverBody';\nimport { NxScrollbar } from '../../_internal/scrollbar';\nimport NDropdownDivider from './DropdownDivider';\n// eslint-disable-next-line import/no-cycle\nimport NDropdownGroup from './DropdownGroup';\n// eslint-disable-next-line import/no-cycle\nimport NDropdownOption from './DropdownOption';\nimport NDropdownRenderOption from './DropdownRenderOption';\nimport { isSubmenuNode, isGroupNode, isDividerNode, isRenderNode } from './utils';\nimport { dropdownInjectionKey, dropdownMenuInjectionKey } from './context';\nimport { modalBodyInjectionKey } from '../../modal/src/interface';\nimport { drawerBodyInjectionKey } from '../../drawer/src/interface';\nimport { popoverBodyInjectionKey } from '../../popover/src/interface';\nexport default defineComponent({\n  name: 'DropdownMenu',\n  props: {\n    scrollable: Boolean,\n    showArrow: Boolean,\n    arrowStyle: [String, Object],\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    tmNodes: {\n      type: Array,\n      default: () => []\n    },\n    parentKey: {\n      type: [String, Number],\n      default: null\n    }\n  },\n  setup(props) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const {\n      renderIconRef,\n      childrenFieldRef\n    } = inject(dropdownInjectionKey);\n    provide(dropdownMenuInjectionKey, {\n      showIconRef: computed(() => {\n        const renderIcon = renderIconRef.value;\n        return props.tmNodes.some(tmNode => {\n          var _a;\n          if (tmNode.isGroup) {\n            return (_a = tmNode.children) === null || _a === void 0 ? void 0 : _a.some(({\n              rawNode: rawChild\n            }) => renderIcon ? renderIcon(rawChild) : rawChild.icon);\n          }\n          const {\n            rawNode\n          } = tmNode;\n          return renderIcon ? renderIcon(rawNode) : rawNode.icon;\n        });\n      }),\n      hasSubmenuRef: computed(() => {\n        const {\n          value: childrenField\n        } = childrenFieldRef;\n        return props.tmNodes.some(tmNode => {\n          var _a;\n          if (tmNode.isGroup) {\n            return (_a = tmNode.children) === null || _a === void 0 ? void 0 : _a.some(({\n              rawNode: rawChild\n            }) => isSubmenuNode(rawChild, childrenField));\n          }\n          const {\n            rawNode\n          } = tmNode;\n          return isSubmenuNode(rawNode, childrenField);\n        });\n      })\n    });\n    const bodyRef = ref(null);\n    provide(modalBodyInjectionKey, null);\n    provide(drawerBodyInjectionKey, null);\n    provide(popoverBodyInjectionKey, bodyRef);\n    return {\n      bodyRef\n    };\n  },\n  render() {\n    const {\n      parentKey,\n      clsPrefix,\n      scrollable\n    } = this;\n    const menuOptionsNode = this.tmNodes.map(tmNode => {\n      const {\n        rawNode\n      } = tmNode;\n      if (rawNode.show === false) return null;\n      if (isRenderNode(rawNode)) {\n        return h(NDropdownRenderOption, {\n          tmNode: tmNode,\n          key: tmNode.key\n        });\n      }\n      if (isDividerNode(rawNode)) {\n        return h(NDropdownDivider, {\n          clsPrefix: clsPrefix,\n          key: tmNode.key\n        });\n      }\n      if (isGroupNode(rawNode)) {\n        return h(NDropdownGroup, {\n          clsPrefix: clsPrefix,\n          tmNode: tmNode,\n          parentKey: parentKey,\n          key: tmNode.key\n        });\n      }\n      return h(NDropdownOption, {\n        clsPrefix: clsPrefix,\n        tmNode: tmNode,\n        parentKey: parentKey,\n        key: tmNode.key,\n        props: rawNode.props,\n        scrollable: scrollable\n      });\n    });\n    return h(\"div\", {\n      class: [`${clsPrefix}-dropdown-menu`, scrollable && `${clsPrefix}-dropdown-menu--scrollable`],\n      ref: \"bodyRef\"\n    }, scrollable ? h(NxScrollbar, {\n      contentClass: `${clsPrefix}-dropdown-menu__content`\n    }, {\n      default: () => menuOptionsNode\n    }) : menuOptionsNode, this.showArrow ? renderArrow({\n      clsPrefix,\n      arrowStyle: this.arrowStyle\n    }) : null);\n  }\n});","map":{"version":3,"names":["computed","defineComponent","h","inject","provide","ref","renderArrow","NxScrollbar","NDropdownDivider","NDropdownGroup","NDropdownOption","NDropdownRenderOption","isSubmenuNode","isGroupNode","isDividerNode","isRenderNode","dropdownInjectionKey","dropdownMenuInjectionKey","modalBodyInjectionKey","drawerBodyInjectionKey","popoverBodyInjectionKey","name","props","scrollable","Boolean","showArrow","arrowStyle","String","Object","clsPrefix","type","required","tmNodes","Array","default","parentKey","Number","setup","renderIconRef","childrenFieldRef","showIconRef","renderIcon","value","some","tmNode","_a","isGroup","children","rawNode","rawChild","icon","hasSubmenuRef","childrenField","bodyRef","render","menuOptionsNode","map","show","key","class","contentClass"],"sources":["/Users/elmo/Documents/GitHub/meetings_vue3/node_modules/naive-ui/es/dropdown/src/DropdownMenu.js"],"sourcesContent":["import { computed, defineComponent, h, inject, provide, ref } from 'vue';\nimport { renderArrow } from '../../popover/src/PopoverBody';\nimport { NxScrollbar } from '../../_internal/scrollbar';\nimport NDropdownDivider from './DropdownDivider';\n// eslint-disable-next-line import/no-cycle\nimport NDropdownGroup from './DropdownGroup';\n// eslint-disable-next-line import/no-cycle\nimport NDropdownOption from './DropdownOption';\nimport NDropdownRenderOption from './DropdownRenderOption';\nimport { isSubmenuNode, isGroupNode, isDividerNode, isRenderNode } from './utils';\nimport { dropdownInjectionKey, dropdownMenuInjectionKey } from './context';\nimport { modalBodyInjectionKey } from '../../modal/src/interface';\nimport { drawerBodyInjectionKey } from '../../drawer/src/interface';\nimport { popoverBodyInjectionKey } from '../../popover/src/interface';\nexport default defineComponent({\n    name: 'DropdownMenu',\n    props: {\n        scrollable: Boolean,\n        showArrow: Boolean,\n        arrowStyle: [String, Object],\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        tmNodes: {\n            type: Array,\n            default: () => []\n        },\n        parentKey: {\n            type: [String, Number],\n            default: null\n        }\n    },\n    setup(props) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const { renderIconRef, childrenFieldRef } = inject(dropdownInjectionKey);\n        provide(dropdownMenuInjectionKey, {\n            showIconRef: computed(() => {\n                const renderIcon = renderIconRef.value;\n                return props.tmNodes.some((tmNode) => {\n                    var _a;\n                    if (tmNode.isGroup) {\n                        return (_a = tmNode.children) === null || _a === void 0 ? void 0 : _a.some(({ rawNode: rawChild }) => renderIcon ? renderIcon(rawChild) : rawChild.icon);\n                    }\n                    const { rawNode } = tmNode;\n                    return renderIcon ? renderIcon(rawNode) : rawNode.icon;\n                });\n            }),\n            hasSubmenuRef: computed(() => {\n                const { value: childrenField } = childrenFieldRef;\n                return props.tmNodes.some((tmNode) => {\n                    var _a;\n                    if (tmNode.isGroup) {\n                        return (_a = tmNode.children) === null || _a === void 0 ? void 0 : _a.some(({ rawNode: rawChild }) => isSubmenuNode(rawChild, childrenField));\n                    }\n                    const { rawNode } = tmNode;\n                    return isSubmenuNode(rawNode, childrenField);\n                });\n            })\n        });\n        const bodyRef = ref(null);\n        provide(modalBodyInjectionKey, null);\n        provide(drawerBodyInjectionKey, null);\n        provide(popoverBodyInjectionKey, bodyRef);\n        return {\n            bodyRef\n        };\n    },\n    render() {\n        const { parentKey, clsPrefix, scrollable } = this;\n        const menuOptionsNode = this.tmNodes.map((tmNode) => {\n            const { rawNode } = tmNode;\n            if (rawNode.show === false)\n                return null;\n            if (isRenderNode(rawNode)) {\n                return (h(NDropdownRenderOption, { tmNode: tmNode, key: tmNode.key }));\n            }\n            if (isDividerNode(rawNode)) {\n                return h(NDropdownDivider, { clsPrefix: clsPrefix, key: tmNode.key });\n            }\n            if (isGroupNode(rawNode)) {\n                return (h(NDropdownGroup, { clsPrefix: clsPrefix, tmNode: tmNode, parentKey: parentKey, key: tmNode.key }));\n            }\n            return (h(NDropdownOption, { clsPrefix: clsPrefix, tmNode: tmNode, parentKey: parentKey, key: tmNode.key, props: rawNode.props, scrollable: scrollable }));\n        });\n        return (h(\"div\", { class: [\n                `${clsPrefix}-dropdown-menu`,\n                scrollable && `${clsPrefix}-dropdown-menu--scrollable`\n            ], ref: \"bodyRef\" },\n            scrollable ? (h(NxScrollbar, { contentClass: `${clsPrefix}-dropdown-menu__content` }, {\n                default: () => menuOptionsNode\n            })) : (menuOptionsNode),\n            this.showArrow\n                ? renderArrow({\n                    clsPrefix,\n                    arrowStyle: this.arrowStyle\n                })\n                : null));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}