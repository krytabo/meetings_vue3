{"ast":null,"code":"import { ref, watch } from 'vue';\nexport function len(s) {\n  let count = 0;\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  for (const _ of s) {\n    count++;\n  }\n  return count;\n}\nexport function isEmptyInputValue(value) {\n  return value === '' || value == null;\n}\nexport function useCursor(inputElRef) {\n  const selectionRef = ref(null);\n  function recordCursor() {\n    const {\n      value: input\n    } = inputElRef;\n    if (!(input === null || input === void 0 ? void 0 : input.focus)) {\n      reset();\n      return;\n    }\n    const {\n      selectionStart,\n      selectionEnd,\n      value\n    } = input;\n    if (selectionStart == null || selectionEnd == null) {\n      reset();\n      return;\n    }\n    selectionRef.value = {\n      start: selectionStart,\n      end: selectionEnd,\n      beforeText: value.slice(0, selectionStart),\n      afterText: value.slice(selectionEnd)\n    };\n  }\n  function restoreCursor() {\n    var _a;\n    const {\n      value: selection\n    } = selectionRef;\n    const {\n      value: inputEl\n    } = inputElRef;\n    if (!selection || !inputEl) {\n      return;\n    }\n    const {\n      value\n    } = inputEl;\n    const {\n      start,\n      beforeText,\n      afterText\n    } = selection;\n    let startPos = value.length;\n    if (value.endsWith(afterText)) {\n      startPos = value.length - afterText.length;\n    } else if (value.startsWith(beforeText)) {\n      startPos = beforeText.length;\n    } else {\n      const beforeLastChar = beforeText[start - 1];\n      const newIndex = value.indexOf(beforeLastChar, start - 1);\n      if (newIndex !== -1) {\n        startPos = newIndex + 1;\n      }\n    }\n    (_a = inputEl.setSelectionRange) === null || _a === void 0 ? void 0 : _a.call(inputEl, startPos, startPos);\n  }\n  function reset() {\n    selectionRef.value = null;\n  }\n  watch(inputElRef, reset);\n  return {\n    recordCursor,\n    restoreCursor\n  };\n}","map":{"version":3,"names":["ref","watch","len","s","count","_","isEmptyInputValue","value","useCursor","inputElRef","selectionRef","recordCursor","input","focus","reset","selectionStart","selectionEnd","start","end","beforeText","slice","afterText","restoreCursor","_a","selection","inputEl","startPos","length","endsWith","startsWith","beforeLastChar","newIndex","indexOf","setSelectionRange","call"],"sources":["/Users/elmo/GitHub/meetings_vue3/node_modules/naive-ui/es/input/src/utils.js"],"sourcesContent":["import { ref, watch } from 'vue';\nexport function len(s) {\n    let count = 0;\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    for (const _ of s) {\n        count++;\n    }\n    return count;\n}\nexport function isEmptyInputValue(value) {\n    return value === '' || value == null;\n}\nexport function useCursor(inputElRef) {\n    const selectionRef = ref(null);\n    function recordCursor() {\n        const { value: input } = inputElRef;\n        if (!(input === null || input === void 0 ? void 0 : input.focus)) {\n            reset();\n            return;\n        }\n        const { selectionStart, selectionEnd, value } = input;\n        if (selectionStart == null || selectionEnd == null) {\n            reset();\n            return;\n        }\n        selectionRef.value = {\n            start: selectionStart,\n            end: selectionEnd,\n            beforeText: value.slice(0, selectionStart),\n            afterText: value.slice(selectionEnd)\n        };\n    }\n    function restoreCursor() {\n        var _a;\n        const { value: selection } = selectionRef;\n        const { value: inputEl } = inputElRef;\n        if (!selection || !inputEl) {\n            return;\n        }\n        const { value } = inputEl;\n        const { start, beforeText, afterText } = selection;\n        let startPos = value.length;\n        if (value.endsWith(afterText)) {\n            startPos = value.length - afterText.length;\n        }\n        else if (value.startsWith(beforeText)) {\n            startPos = beforeText.length;\n        }\n        else {\n            const beforeLastChar = beforeText[start - 1];\n            const newIndex = value.indexOf(beforeLastChar, start - 1);\n            if (newIndex !== -1) {\n                startPos = newIndex + 1;\n            }\n        }\n        (_a = inputEl.setSelectionRange) === null || _a === void 0 ? void 0 : _a.call(inputEl, startPos, startPos);\n    }\n    function reset() {\n        selectionRef.value = null;\n    }\n    watch(inputElRef, reset);\n    return {\n        recordCursor,\n        restoreCursor\n    };\n}\n"],"mappings":"AAAA,SAASA,GAAG,EAAEC,KAAK,QAAQ,KAAK;AAChC,OAAO,SAASC,GAAG,CAACC,CAAC,EAAE;EACnB,IAAIC,KAAK,GAAG,CAAC;EACb;EACA,KAAK,MAAMC,CAAC,IAAIF,CAAC,EAAE;IACfC,KAAK,EAAE;EACX;EACA,OAAOA,KAAK;AAChB;AACA,OAAO,SAASE,iBAAiB,CAACC,KAAK,EAAE;EACrC,OAAOA,KAAK,KAAK,EAAE,IAAIA,KAAK,IAAI,IAAI;AACxC;AACA,OAAO,SAASC,SAAS,CAACC,UAAU,EAAE;EAClC,MAAMC,YAAY,GAAGV,GAAG,CAAC,IAAI,CAAC;EAC9B,SAASW,YAAY,GAAG;IACpB,MAAM;MAAEJ,KAAK,EAAEK;IAAM,CAAC,GAAGH,UAAU;IACnC,IAAI,EAAEG,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,KAAK,CAACC,KAAK,CAAC,EAAE;MAC9DC,KAAK,EAAE;MACP;IACJ;IACA,MAAM;MAAEC,cAAc;MAAEC,YAAY;MAAET;IAAM,CAAC,GAAGK,KAAK;IACrD,IAAIG,cAAc,IAAI,IAAI,IAAIC,YAAY,IAAI,IAAI,EAAE;MAChDF,KAAK,EAAE;MACP;IACJ;IACAJ,YAAY,CAACH,KAAK,GAAG;MACjBU,KAAK,EAAEF,cAAc;MACrBG,GAAG,EAAEF,YAAY;MACjBG,UAAU,EAAEZ,KAAK,CAACa,KAAK,CAAC,CAAC,EAAEL,cAAc,CAAC;MAC1CM,SAAS,EAAEd,KAAK,CAACa,KAAK,CAACJ,YAAY;IACvC,CAAC;EACL;EACA,SAASM,aAAa,GAAG;IACrB,IAAIC,EAAE;IACN,MAAM;MAAEhB,KAAK,EAAEiB;IAAU,CAAC,GAAGd,YAAY;IACzC,MAAM;MAAEH,KAAK,EAAEkB;IAAQ,CAAC,GAAGhB,UAAU;IACrC,IAAI,CAACe,SAAS,IAAI,CAACC,OAAO,EAAE;MACxB;IACJ;IACA,MAAM;MAAElB;IAAM,CAAC,GAAGkB,OAAO;IACzB,MAAM;MAAER,KAAK;MAAEE,UAAU;MAAEE;IAAU,CAAC,GAAGG,SAAS;IAClD,IAAIE,QAAQ,GAAGnB,KAAK,CAACoB,MAAM;IAC3B,IAAIpB,KAAK,CAACqB,QAAQ,CAACP,SAAS,CAAC,EAAE;MAC3BK,QAAQ,GAAGnB,KAAK,CAACoB,MAAM,GAAGN,SAAS,CAACM,MAAM;IAC9C,CAAC,MACI,IAAIpB,KAAK,CAACsB,UAAU,CAACV,UAAU,CAAC,EAAE;MACnCO,QAAQ,GAAGP,UAAU,CAACQ,MAAM;IAChC,CAAC,MACI;MACD,MAAMG,cAAc,GAAGX,UAAU,CAACF,KAAK,GAAG,CAAC,CAAC;MAC5C,MAAMc,QAAQ,GAAGxB,KAAK,CAACyB,OAAO,CAACF,cAAc,EAAEb,KAAK,GAAG,CAAC,CAAC;MACzD,IAAIc,QAAQ,KAAK,CAAC,CAAC,EAAE;QACjBL,QAAQ,GAAGK,QAAQ,GAAG,CAAC;MAC3B;IACJ;IACA,CAACR,EAAE,GAAGE,OAAO,CAACQ,iBAAiB,MAAM,IAAI,IAAIV,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACW,IAAI,CAACT,OAAO,EAAEC,QAAQ,EAAEA,QAAQ,CAAC;EAC9G;EACA,SAASZ,KAAK,GAAG;IACbJ,YAAY,CAACH,KAAK,GAAG,IAAI;EAC7B;EACAN,KAAK,CAACQ,UAAU,EAAEK,KAAK,CAAC;EACxB,OAAO;IACHH,YAAY;IACZW;EACJ,CAAC;AACL"},"metadata":{},"sourceType":"module","externalDependencies":[]}