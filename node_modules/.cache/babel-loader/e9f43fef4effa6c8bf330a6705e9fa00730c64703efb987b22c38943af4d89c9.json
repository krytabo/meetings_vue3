{"ast":null,"code":"import { defineComponent, h, inject, ref, onBeforeUnmount } from 'vue';\nimport { off, on } from 'evtd';\nimport { dataTableInjectionKey } from '../interface';\nexport default defineComponent({\n  name: 'ColumnResizeButton',\n  props: {\n    onResizeStart: Function,\n    onResize: Function,\n    onResizeEnd: Function\n  },\n  setup(props) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const {\n      mergedClsPrefixRef\n    } = inject(dataTableInjectionKey);\n    const activeRef = ref(false);\n    let startX = 0;\n    function getMouseX(e) {\n      return e.clientX;\n    }\n    function handleMousedown(e) {\n      var _a;\n      const alreadyStarted = activeRef.value;\n      startX = getMouseX(e);\n      activeRef.value = true;\n      if (!alreadyStarted) {\n        on('mousemove', window, handleMousemove);\n        on('mouseup', window, handleMouseup);\n        (_a = props.onResizeStart) === null || _a === void 0 ? void 0 : _a.call(props);\n      }\n    }\n    function handleMousemove(e) {\n      var _a;\n      (_a = props.onResize) === null || _a === void 0 ? void 0 : _a.call(props, getMouseX(e) - startX);\n    }\n    function handleMouseup() {\n      var _a;\n      activeRef.value = false;\n      (_a = props.onResizeEnd) === null || _a === void 0 ? void 0 : _a.call(props);\n      off('mousemove', window, handleMousemove);\n      off('mouseup', window, handleMouseup);\n    }\n    onBeforeUnmount(() => {\n      off('mousemove', window, handleMousemove);\n      off('mouseup', window, handleMouseup);\n    });\n    return {\n      mergedClsPrefix: mergedClsPrefixRef,\n      active: activeRef,\n      handleMousedown\n    };\n  },\n  render() {\n    const {\n      mergedClsPrefix\n    } = this;\n    return h(\"span\", {\n      \"data-data-table-resizable\": true,\n      class: [`${mergedClsPrefix}-data-table-resize-button`, this.active && `${mergedClsPrefix}-data-table-resize-button--active`],\n      onMousedown: this.handleMousedown\n    });\n  }\n});","map":{"version":3,"names":["defineComponent","h","inject","ref","onBeforeUnmount","off","on","dataTableInjectionKey","name","props","onResizeStart","Function","onResize","onResizeEnd","setup","mergedClsPrefixRef","activeRef","startX","getMouseX","e","clientX","handleMousedown","_a","alreadyStarted","value","window","handleMousemove","handleMouseup","call","mergedClsPrefix","active","render","class","onMousedown"],"sources":["/Users/krystal/Documents/GitHub/meetings_vue3/node_modules/naive-ui/es/data-table/src/HeaderButton/ResizeButton.js"],"sourcesContent":["import { defineComponent, h, inject, ref, onBeforeUnmount } from 'vue';\nimport { off, on } from 'evtd';\nimport { dataTableInjectionKey } from '../interface';\nexport default defineComponent({\n    name: 'ColumnResizeButton',\n    props: {\n        onResizeStart: Function,\n        onResize: Function,\n        onResizeEnd: Function\n    },\n    setup(props) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const { mergedClsPrefixRef } = inject(dataTableInjectionKey);\n        const activeRef = ref(false);\n        let startX = 0;\n        function getMouseX(e) {\n            return e.clientX;\n        }\n        function handleMousedown(e) {\n            var _a;\n            const alreadyStarted = activeRef.value;\n            startX = getMouseX(e);\n            activeRef.value = true;\n            if (!alreadyStarted) {\n                on('mousemove', window, handleMousemove);\n                on('mouseup', window, handleMouseup);\n                (_a = props.onResizeStart) === null || _a === void 0 ? void 0 : _a.call(props);\n            }\n        }\n        function handleMousemove(e) {\n            var _a;\n            (_a = props.onResize) === null || _a === void 0 ? void 0 : _a.call(props, getMouseX(e) - startX);\n        }\n        function handleMouseup() {\n            var _a;\n            activeRef.value = false;\n            (_a = props.onResizeEnd) === null || _a === void 0 ? void 0 : _a.call(props);\n            off('mousemove', window, handleMousemove);\n            off('mouseup', window, handleMouseup);\n        }\n        onBeforeUnmount(() => {\n            off('mousemove', window, handleMousemove);\n            off('mouseup', window, handleMouseup);\n        });\n        return {\n            mergedClsPrefix: mergedClsPrefixRef,\n            active: activeRef,\n            handleMousedown\n        };\n    },\n    render() {\n        const { mergedClsPrefix } = this;\n        return (h(\"span\", { \"data-data-table-resizable\": true, class: [\n                `${mergedClsPrefix}-data-table-resize-button`,\n                this.active && `${mergedClsPrefix}-data-table-resize-button--active`\n            ], onMousedown: this.handleMousedown }));\n    }\n});\n"],"mappings":"AAAA,SAASA,eAAe,EAAEC,CAAC,EAAEC,MAAM,EAAEC,GAAG,EAAEC,eAAe,QAAQ,KAAK;AACtE,SAASC,GAAG,EAAEC,EAAE,QAAQ,MAAM;AAC9B,SAASC,qBAAqB,QAAQ,cAAc;AACpD,eAAeP,eAAe,CAAC;EAC3BQ,IAAI,EAAE,oBAAoB;EAC1BC,KAAK,EAAE;IACHC,aAAa,EAAEC,QAAQ;IACvBC,QAAQ,EAAED,QAAQ;IAClBE,WAAW,EAAEF;EACjB,CAAC;EACDG,KAAK,CAACL,KAAK,EAAE;IACT;IACA,MAAM;MAAEM;IAAmB,CAAC,GAAGb,MAAM,CAACK,qBAAqB,CAAC;IAC5D,MAAMS,SAAS,GAAGb,GAAG,CAAC,KAAK,CAAC;IAC5B,IAAIc,MAAM,GAAG,CAAC;IACd,SAASC,SAAS,CAACC,CAAC,EAAE;MAClB,OAAOA,CAAC,CAACC,OAAO;IACpB;IACA,SAASC,eAAe,CAACF,CAAC,EAAE;MACxB,IAAIG,EAAE;MACN,MAAMC,cAAc,GAAGP,SAAS,CAACQ,KAAK;MACtCP,MAAM,GAAGC,SAAS,CAACC,CAAC,CAAC;MACrBH,SAAS,CAACQ,KAAK,GAAG,IAAI;MACtB,IAAI,CAACD,cAAc,EAAE;QACjBjB,EAAE,CAAC,WAAW,EAAEmB,MAAM,EAAEC,eAAe,CAAC;QACxCpB,EAAE,CAAC,SAAS,EAAEmB,MAAM,EAAEE,aAAa,CAAC;QACpC,CAACL,EAAE,GAAGb,KAAK,CAACC,aAAa,MAAM,IAAI,IAAIY,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACM,IAAI,CAACnB,KAAK,CAAC;MAClF;IACJ;IACA,SAASiB,eAAe,CAACP,CAAC,EAAE;MACxB,IAAIG,EAAE;MACN,CAACA,EAAE,GAAGb,KAAK,CAACG,QAAQ,MAAM,IAAI,IAAIU,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACM,IAAI,CAACnB,KAAK,EAAES,SAAS,CAACC,CAAC,CAAC,GAAGF,MAAM,CAAC;IACpG;IACA,SAASU,aAAa,GAAG;MACrB,IAAIL,EAAE;MACNN,SAAS,CAACQ,KAAK,GAAG,KAAK;MACvB,CAACF,EAAE,GAAGb,KAAK,CAACI,WAAW,MAAM,IAAI,IAAIS,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACM,IAAI,CAACnB,KAAK,CAAC;MAC5EJ,GAAG,CAAC,WAAW,EAAEoB,MAAM,EAAEC,eAAe,CAAC;MACzCrB,GAAG,CAAC,SAAS,EAAEoB,MAAM,EAAEE,aAAa,CAAC;IACzC;IACAvB,eAAe,CAAC,MAAM;MAClBC,GAAG,CAAC,WAAW,EAAEoB,MAAM,EAAEC,eAAe,CAAC;MACzCrB,GAAG,CAAC,SAAS,EAAEoB,MAAM,EAAEE,aAAa,CAAC;IACzC,CAAC,CAAC;IACF,OAAO;MACHE,eAAe,EAAEd,kBAAkB;MACnCe,MAAM,EAAEd,SAAS;MACjBK;IACJ,CAAC;EACL,CAAC;EACDU,MAAM,GAAG;IACL,MAAM;MAAEF;IAAgB,CAAC,GAAG,IAAI;IAChC,OAAQ5B,CAAC,CAAC,MAAM,EAAE;MAAE,2BAA2B,EAAE,IAAI;MAAE+B,KAAK,EAAE,CACrD,GAAEH,eAAgB,2BAA0B,EAC7C,IAAI,CAACC,MAAM,IAAK,GAAED,eAAgB,mCAAkC,CACvE;MAAEI,WAAW,EAAE,IAAI,CAACZ;IAAgB,CAAC,CAAC;EAC/C;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}