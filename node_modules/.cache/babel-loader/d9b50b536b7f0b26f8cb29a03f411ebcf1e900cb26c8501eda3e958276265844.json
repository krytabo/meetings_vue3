{"ast":null,"code":"/* eslint-disable @typescript-eslint/strict-boolean-expressions */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { ref, readonly, onBeforeMount, onBeforeUnmount } from 'vue';\nimport { hasInstance } from './utils';\nlet usedCount = 0;\n// Mql means media query list\nconst supportMatchMedia = typeof window !== 'undefined' && window.matchMedia !== undefined;\nconst osTheme = ref(null);\nlet darkMql;\nlet lightMql;\nfunction handleDarkMqlChange(e) {\n  if (e.matches) {\n    osTheme.value = 'dark';\n  }\n}\nfunction handleLightMqlChange(e) {\n  if (e.matches) {\n    osTheme.value = 'light';\n  }\n}\nfunction init() {\n  darkMql = window.matchMedia('(prefers-color-scheme: dark)');\n  lightMql = window.matchMedia('(prefers-color-scheme: light)');\n  if (darkMql.matches) {\n    osTheme.value = 'dark';\n  } else if (lightMql.matches) {\n    osTheme.value = 'light';\n  } else {\n    osTheme.value = null;\n  }\n  if (darkMql.addEventListener) {\n    darkMql.addEventListener('change', handleDarkMqlChange);\n    lightMql.addEventListener('change', handleLightMqlChange);\n  } else if (darkMql.addListener) {\n    darkMql.addListener(handleDarkMqlChange);\n    lightMql.addListener(handleLightMqlChange);\n  }\n}\nfunction clean() {\n  if ('removeEventListener' in darkMql) {\n    darkMql.removeEventListener('change', handleDarkMqlChange);\n    lightMql.removeEventListener('change', handleLightMqlChange);\n  } else if ('removeListener' in darkMql) {\n    darkMql.removeListener(handleDarkMqlChange);\n    lightMql.removeListener(handleLightMqlChange);\n  }\n  darkMql = undefined;\n  lightMql = undefined;\n}\nlet managable = true;\nexport default function useOsTheme() {\n  /* istanbul ignore next */\n  if (process.env.NODE_ENV !== 'test' && !supportMatchMedia) {\n    return readonly(osTheme);\n  }\n  if (process.env.NODE_ENV === 'test' && window.matchMedia === undefined) {\n    return readonly(osTheme);\n  }\n  if (usedCount === 0) init();\n  if (managable && (managable = hasInstance())) {\n    onBeforeMount(() => {\n      usedCount += 1;\n    });\n    onBeforeUnmount(() => {\n      usedCount -= 1;\n      if (usedCount === 0) clean();\n    });\n  }\n  return readonly(osTheme);\n}","map":{"version":3,"names":["ref","readonly","onBeforeMount","onBeforeUnmount","hasInstance","usedCount","supportMatchMedia","window","matchMedia","undefined","osTheme","darkMql","lightMql","handleDarkMqlChange","e","matches","value","handleLightMqlChange","init","addEventListener","addListener","clean","removeEventListener","removeListener","managable","useOsTheme","process","env","NODE_ENV"],"sources":["/Users/elmo/Documents/GitHub/meetings_vue3/node_modules/vooks/es/use-os-theme.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/strict-boolean-expressions */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { ref, readonly, onBeforeMount, onBeforeUnmount } from 'vue';\nimport { hasInstance } from './utils';\nlet usedCount = 0;\n// Mql means media query list\nconst supportMatchMedia = typeof window !== 'undefined' && window.matchMedia !== undefined;\nconst osTheme = ref(null);\nlet darkMql;\nlet lightMql;\nfunction handleDarkMqlChange(e) {\n    if (e.matches) {\n        osTheme.value = 'dark';\n    }\n}\nfunction handleLightMqlChange(e) {\n    if (e.matches) {\n        osTheme.value = 'light';\n    }\n}\nfunction init() {\n    darkMql = window.matchMedia('(prefers-color-scheme: dark)');\n    lightMql = window.matchMedia('(prefers-color-scheme: light)');\n    if (darkMql.matches) {\n        osTheme.value = 'dark';\n    }\n    else if (lightMql.matches) {\n        osTheme.value = 'light';\n    }\n    else {\n        osTheme.value = null;\n    }\n    if (darkMql.addEventListener) {\n        darkMql.addEventListener('change', handleDarkMqlChange);\n        lightMql.addEventListener('change', handleLightMqlChange);\n    }\n    else if (darkMql.addListener) {\n        darkMql.addListener(handleDarkMqlChange);\n        lightMql.addListener(handleLightMqlChange);\n    }\n}\nfunction clean() {\n    if ('removeEventListener' in darkMql) {\n        darkMql.removeEventListener('change', handleDarkMqlChange);\n        lightMql.removeEventListener('change', handleLightMqlChange);\n    }\n    else if ('removeListener' in darkMql) {\n        darkMql.removeListener(handleDarkMqlChange);\n        lightMql.removeListener(handleLightMqlChange);\n    }\n    darkMql = undefined;\n    lightMql = undefined;\n}\nlet managable = true;\nexport default function useOsTheme() {\n    /* istanbul ignore next */\n    if (process.env.NODE_ENV !== 'test' && !supportMatchMedia) {\n        return readonly(osTheme);\n    }\n    if (process.env.NODE_ENV === 'test' && window.matchMedia === undefined) {\n        return readonly(osTheme);\n    }\n    if (usedCount === 0)\n        init();\n    if (managable && (managable = hasInstance())) {\n        onBeforeMount(() => {\n            usedCount += 1;\n        });\n        onBeforeUnmount(() => {\n            usedCount -= 1;\n            if (usedCount === 0)\n                clean();\n        });\n    }\n    return readonly(osTheme);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}