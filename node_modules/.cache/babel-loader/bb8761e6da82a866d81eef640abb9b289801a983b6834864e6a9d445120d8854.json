{"ast":null,"code":"import { ref, readonly, onBeforeMount, onBeforeUnmount } from 'vue';\nimport { on, off } from 'evtd';\nimport { hasInstance, isBrowser } from './utils';\nconst mousePositionRef = ref(null);\nfunction clickHandler(e) {\n  if (e.clientX > 0 || e.clientY > 0) {\n    mousePositionRef.value = {\n      x: e.clientX,\n      y: e.clientY\n    };\n  } else {\n    // x = 0 & y = 0\n    const {\n      target\n    } = e;\n    if (target instanceof Element) {\n      const {\n        left,\n        top,\n        width,\n        height\n      } = target.getBoundingClientRect();\n      if (left > 0 || top > 0) {\n        // impossible to be triggered by real click\n        mousePositionRef.value = {\n          x: left + width / 2,\n          y: top + height / 2\n        };\n      } else {\n        mousePositionRef.value = {\n          x: 0,\n          y: 0\n        };\n      }\n    } else {\n      mousePositionRef.value = null;\n    }\n  }\n}\nlet usedCount = 0;\nlet managable = true;\nexport default function useClickPosition() {\n  if (!isBrowser) return readonly(ref(null));\n  if (usedCount === 0) on('click', document, clickHandler, true);\n  const setup = () => {\n    usedCount += 1;\n  };\n  if (managable && (managable = hasInstance())) {\n    onBeforeMount(setup);\n    onBeforeUnmount(() => {\n      usedCount -= 1;\n      if (usedCount === 0) off('click', document, clickHandler, true);\n    });\n  } else {\n    setup();\n  }\n  return readonly(mousePositionRef);\n}","map":{"version":3,"names":["ref","readonly","onBeforeMount","onBeforeUnmount","on","off","hasInstance","isBrowser","mousePositionRef","clickHandler","e","clientX","clientY","value","x","y","target","Element","left","top","width","height","getBoundingClientRect","usedCount","managable","useClickPosition","document","setup"],"sources":["/Users/krystal/Documents/GitHub/meetings_vue3/node_modules/vooks/es/use-click-position.js"],"sourcesContent":["import { ref, readonly, onBeforeMount, onBeforeUnmount } from 'vue';\nimport { on, off } from 'evtd';\nimport { hasInstance, isBrowser } from './utils';\nconst mousePositionRef = ref(null);\nfunction clickHandler(e) {\n    if (e.clientX > 0 || e.clientY > 0) {\n        mousePositionRef.value = {\n            x: e.clientX,\n            y: e.clientY\n        };\n    }\n    else {\n        // x = 0 & y = 0\n        const { target } = e;\n        if (target instanceof Element) {\n            const { left, top, width, height } = target.getBoundingClientRect();\n            if (left > 0 || top > 0) {\n                // impossible to be triggered by real click\n                mousePositionRef.value = {\n                    x: left + width / 2,\n                    y: top + height / 2\n                };\n            }\n            else {\n                mousePositionRef.value = { x: 0, y: 0 };\n            }\n        }\n        else {\n            mousePositionRef.value = null;\n        }\n    }\n}\nlet usedCount = 0;\nlet managable = true;\nexport default function useClickPosition() {\n    if (!isBrowser)\n        return readonly(ref(null));\n    if (usedCount === 0)\n        on('click', document, clickHandler, true);\n    const setup = () => {\n        usedCount += 1;\n    };\n    if (managable && (managable = hasInstance())) {\n        onBeforeMount(setup);\n        onBeforeUnmount(() => {\n            usedCount -= 1;\n            if (usedCount === 0)\n                off('click', document, clickHandler, true);\n        });\n    }\n    else {\n        setup();\n    }\n    return readonly(mousePositionRef);\n}\n"],"mappings":"AAAA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,aAAa,EAAEC,eAAe,QAAQ,KAAK;AACnE,SAASC,EAAE,EAAEC,GAAG,QAAQ,MAAM;AAC9B,SAASC,WAAW,EAAEC,SAAS,QAAQ,SAAS;AAChD,MAAMC,gBAAgB,GAAGR,GAAG,CAAC,IAAI,CAAC;AAClC,SAASS,YAAY,CAACC,CAAC,EAAE;EACrB,IAAIA,CAAC,CAACC,OAAO,GAAG,CAAC,IAAID,CAAC,CAACE,OAAO,GAAG,CAAC,EAAE;IAChCJ,gBAAgB,CAACK,KAAK,GAAG;MACrBC,CAAC,EAAEJ,CAAC,CAACC,OAAO;MACZI,CAAC,EAAEL,CAAC,CAACE;IACT,CAAC;EACL,CAAC,MACI;IACD;IACA,MAAM;MAAEI;IAAO,CAAC,GAAGN,CAAC;IACpB,IAAIM,MAAM,YAAYC,OAAO,EAAE;MAC3B,MAAM;QAAEC,IAAI;QAAEC,GAAG;QAAEC,KAAK;QAAEC;MAAO,CAAC,GAAGL,MAAM,CAACM,qBAAqB,EAAE;MACnE,IAAIJ,IAAI,GAAG,CAAC,IAAIC,GAAG,GAAG,CAAC,EAAE;QACrB;QACAX,gBAAgB,CAACK,KAAK,GAAG;UACrBC,CAAC,EAAEI,IAAI,GAAGE,KAAK,GAAG,CAAC;UACnBL,CAAC,EAAEI,GAAG,GAAGE,MAAM,GAAG;QACtB,CAAC;MACL,CAAC,MACI;QACDb,gBAAgB,CAACK,KAAK,GAAG;UAAEC,CAAC,EAAE,CAAC;UAAEC,CAAC,EAAE;QAAE,CAAC;MAC3C;IACJ,CAAC,MACI;MACDP,gBAAgB,CAACK,KAAK,GAAG,IAAI;IACjC;EACJ;AACJ;AACA,IAAIU,SAAS,GAAG,CAAC;AACjB,IAAIC,SAAS,GAAG,IAAI;AACpB,eAAe,SAASC,gBAAgB,GAAG;EACvC,IAAI,CAAClB,SAAS,EACV,OAAON,QAAQ,CAACD,GAAG,CAAC,IAAI,CAAC,CAAC;EAC9B,IAAIuB,SAAS,KAAK,CAAC,EACfnB,EAAE,CAAC,OAAO,EAAEsB,QAAQ,EAAEjB,YAAY,EAAE,IAAI,CAAC;EAC7C,MAAMkB,KAAK,GAAG,MAAM;IAChBJ,SAAS,IAAI,CAAC;EAClB,CAAC;EACD,IAAIC,SAAS,KAAKA,SAAS,GAAGlB,WAAW,EAAE,CAAC,EAAE;IAC1CJ,aAAa,CAACyB,KAAK,CAAC;IACpBxB,eAAe,CAAC,MAAM;MAClBoB,SAAS,IAAI,CAAC;MACd,IAAIA,SAAS,KAAK,CAAC,EACflB,GAAG,CAAC,OAAO,EAAEqB,QAAQ,EAAEjB,YAAY,EAAE,IAAI,CAAC;IAClD,CAAC,CAAC;EACN,CAAC,MACI;IACDkB,KAAK,EAAE;EACX;EACA,OAAO1B,QAAQ,CAACO,gBAAgB,CAAC;AACrC"},"metadata":{},"sourceType":"module","externalDependencies":[]}