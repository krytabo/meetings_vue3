{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, createBlock as _createBlock, vModelText as _vModelText, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, normalizeClass as _normalizeClass, vShow as _vShow, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-5752faac\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"relative flex w-full items-center\"\n};\nconst _hoisted_2 = {\n  class: \"absolute text-red-500\",\n  style: {\n    \"bottom\": \"-20px\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"relative flex w-full items-center\"\n};\nconst _hoisted_4 = {\n  class: \"absolute text-red-500\",\n  style: {\n    \"bottom\": \"-20px\"\n  }\n};\nconst _hoisted_5 = {\n  class: \"flax mb-5 space-x-4\"\n};\nconst _hoisted_6 = {\n  class: \"flex w-full items-center justify-center space-x-2\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_input = _resolveComponent(\"a-input\");\n  const _component_Field = _resolveComponent(\"Field\");\n  const _component_Form = _resolveComponent(\"Form\");\n  const _component_a_tag = _resolveComponent(\"a-tag\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_Form, {\n    \"validation-schema\": $data.rules\n  }, {\n    default: _withCtx(() => [_createVNode(_component_a_input, {\n      modelValue: $data.form.username,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.username = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_Field, {\n      modelValue: $data.form.username,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.username = $event),\n      name: \"usernameFn\",\n      type: \"text\",\n      placeholder: \"请输入手机号\"\n    }, null, 8 /* PROPS */, [\"modelValue\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"validation-schema\"]), _createTextVNode(\" \" + _toDisplayString($data.tags) + \" \" + _toDisplayString($data.ruleForm) + \" \", 1 /* TEXT */), _createVNode(_component_el_form, {\n    model: $data.ruleForm,\n    rules: $data.rules,\n    ref: \"ruleForm\",\n    \"label-width\": \"100px\",\n    class: \"demo-ruleForm\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"活动名称\",\n      prop: \"name\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n        class: _normalizeClass([\"flex h-8 flex-1 items-center space-x-2 rounded bg-white px-4\", {\n          inputError: $data.tags.length === 0\n        }])\n      }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.ruleForm.tags, tag => {\n        return _openBlock(), _createBlock(_component_a_tag, {\n          key: tag.name,\n          color: \"#165dff\",\n          class: \"rounded\",\n          closable: \"\",\n          onClose: $event => $options.handleClose(tag)\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(tag.name), 1 /* TEXT */)]),\n\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClose\"]);\n      }), 128 /* KEYED_FRAGMENT */)), _withDirectives(_createElementVNode(\"input\", {\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.inputValue = $event),\n        onKeyup: _cache[3] || (_cache[3] = _withKeys((...args) => $options.handleInputConfirm && $options.handleInputConfirm(...args), [\"enter\"])),\n        class: \"flex-1\",\n        onBlur: _cache[4] || (_cache[4] = (...args) => $options.handleInputConfirm && $options.handleInputConfirm(...args))\n      }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelText, $data.inputValue]])], 2 /* CLASS */), _withDirectives(_createElementVNode(\"p\", _hoisted_2, \"請選擇對象\", 512 /* NEED_PATCH */), [[_vShow, $data.tags.length === 0]]), _createVNode(_component_el_button, {\n        plain: \"\",\n        onClick: $options.edit_countersign\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"選擇\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])])]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\"]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", {\n    class: _normalizeClass([\"flex h-8 flex-1 items-center space-x-2 rounded bg-white px-4\", {\n      inputError: $data.tags.length === 0\n    }])\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.tags, tag => {\n    return _openBlock(), _createBlock(_component_a_tag, {\n      key: tag.name,\n      color: \"#165dff\",\n      class: \"rounded\",\n      closable: \"\",\n      onClose: $event => $options.handleClose(tag)\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(tag.name), 1 /* TEXT */)]),\n\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClose\"]);\n  }), 128 /* KEYED_FRAGMENT */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.inputValue = $event),\n    onKeyup: _cache[6] || (_cache[6] = _withKeys((...args) => $options.handleInputConfirm && $options.handleInputConfirm(...args), [\"enter\"])),\n    class: \"flex-1\",\n    onBlur: _cache[7] || (_cache[7] = (...args) => $options.handleInputConfirm && $options.handleInputConfirm(...args))\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelText, $data.inputValue]])], 2 /* CLASS */), _withDirectives(_createElementVNode(\"p\", _hoisted_4, \"請選擇對象\", 512 /* NEED_PATCH */), [[_vShow, $data.tags.length === 0]]), _createVNode(_component_el_button, {\n    plain: \"\",\n    onClick: $options.edit_countersign\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"選擇\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])]), _createVNode(_component_el_dialog, {\n    title: \"選擇人員\",\n    draggable: \"\",\n    modelValue: $data.dialogVisible,\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.dialogVisible = $event),\n    \"show-close\": false\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_table, {\n      ref: \"multipleTables\",\n      data: $data.memberList,\n      onSelectionChange: $options.select\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        type: \"selection\",\n        width: \"50\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"編號\",\n        prop: \"id\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"姓名\",\n        prop: \"name\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"部門\",\n        prop: \"department\"\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\", \"onSelectionChange\"])]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_a_button, {\n      status: \"primary\",\n      onClick: $options.memberListDialog_Cancel\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"取消\")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_a_button, {\n      type: \"primary\",\n      onClick: $options.memberListDialog_Confirm\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"確定\")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createCommentVNode(\"<memberDialog v-model=\\\"dialogVisible\\\" @resetPopupData=\\\"memberListDialog_Cancel\\\" @submitPopupData=\\\"memberListDialog_Confirm\\\" @selected-user=\\\"selectedUser\\\"></memberDialog>\")], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":"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","names":["class","style","_createVNode","_component_Form","$data","_component_a_input","username","_component_Field","name","type","placeholder","_component_el_form","model","rules","ref","_component_el_form_item","label","prop","_createElementVNode","_hoisted_1","inputError","length","_createElementBlock","_Fragment","tags","tag","_createBlock","_component_a_tag","key","color","closable","onClose","$options","onKeyup","onBlur","_hoisted_2","_component_el_button","plain","onClick","_hoisted_3","_hoisted_4","_component_el_dialog","title","draggable","_hoisted_5","_component_el_table","data","onSelectionChange","_component_el_table_column","width","_hoisted_6","_component_a_button","status","_createCommentVNode"],"sourceRoot":"","sources":["/Users/elmo/Documents/GitHub/meetings_vue3/src/views/test.vue"],"sourcesContent":["<template>\n  <Form :validation-schema=\"rules\">\n    <a-input v-model=\"form.username\"></a-input>\n    <Field v-model=\"form.username\" name=\"usernameFn\" type=\"text\" placeholder=\"请输入手机号\" />\n  </Form>\n  {{ tags }}\n  {{ ruleForm }}\n\n  <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n    <el-form-item label=\"活动名称\" prop=\"name\">\n      <div class=\"relative flex w-full items-center\">\n        <div class=\"flex h-8 flex-1 items-center space-x-2 rounded bg-white px-4\" :class=\"{ inputError: tags.length === 0 }\">\n          <a-tag v-for=\"tag in ruleForm.tags\" :key=\"tag.name\" color=\"#165dff\" class=\"rounded\" closable @close=\"handleClose(tag)\">{{ tag.name }}</a-tag>\n          <input v-model=\"inputValue\" @keyup.enter=\"handleInputConfirm\" class=\"flex-1\" @blur=\"handleInputConfirm\" />\n        </div>\n        <p v-show=\"tags.length === 0\" class=\"absolute text-red-500\" style=\"bottom: -20px\">請選擇對象</p>\n        <el-button plain @click=\"edit_countersign\">選擇</el-button>\n      </div>\n    </el-form-item>\n  </el-form>\n  <div class=\"relative flex w-full items-center\">\n    <div class=\"flex h-8 flex-1 items-center space-x-2 rounded bg-white px-4\" :class=\"{ inputError: tags.length === 0 }\">\n      <a-tag v-for=\"tag in tags\" :key=\"tag.name\" color=\"#165dff\" class=\"rounded\" closable @close=\"handleClose(tag)\">{{ tag.name }}</a-tag>\n      <input v-model=\"inputValue\" @keyup.enter=\"handleInputConfirm\" class=\"flex-1\" @blur=\"handleInputConfirm\" />\n    </div>\n    <p v-show=\"tags.length === 0\" class=\"absolute text-red-500\" style=\"bottom: -20px\">請選擇對象</p>\n    <el-button plain @click=\"edit_countersign\">選擇</el-button>\n  </div>\n  <el-dialog title=\"選擇人員\" draggable v-model=\"dialogVisible\" :show-close=\"false\">\n    <div class=\"flax mb-5 space-x-4\">\n      <el-table ref=\"multipleTables\" :data=\"memberList\" @selection-change=\"select\">\n        <el-table-column type=\"selection\" width=\"50\"></el-table-column>\n        <el-table-column label=\"編號\" prop=\"id\"></el-table-column>\n        <el-table-column label=\"姓名\" prop=\"name\"></el-table-column>\n        <el-table-column label=\"部門\" prop=\"department\"></el-table-column>\n      </el-table>\n    </div>\n\n    <div class=\"flex w-full items-center justify-center space-x-2\">\n      <a-button status=\"primary\" @click=\"memberListDialog_Cancel\">取消</a-button>\n      <a-button type=\"primary\" @click=\"memberListDialog_Confirm\">確定</a-button>\n    </div>\n  </el-dialog>\n  <!--<memberDialog v-model=\"dialogVisible\" @resetPopupData=\"memberListDialog_Cancel\" @submitPopupData=\"memberListDialog_Confirm\" @selected-user=\"selectedUser\"></memberDialog>-->\n</template>\n\n<script>\nimport { GenNonDuplicateID } from \"@/common/until\";\nimport { Form, Field } from \"vee-validate\";\n// import memberDialog from \"@/components/memberDialog\";\nimport { userList } from \"@/views/config/api\";\nexport default {\n  name: \"testPage\",\n  components: {\n    // memberDialog,\n    Form,\n    Field,\n  },\n  data() {\n    return {\n      ruleForm: [\n        {\n          tags: [],\n        },\n      ],\n      form: {\n        username: \"\",\n        password: \"\",\n      },\n      dialogVisible: false,\n      rules: {\n        username: [\n          { required: true, message: \"请输入活动名称\", trigger: \"blur\" },\n          { min: 3, max: 5, message: \"长度在 3 到 5 个字符\", trigger: \"blur\" },\n        ],\n        password: [{ required: true, message: \"请选择活动区域\", trigger: \"change\" }],\n      },\n      tags: [\n        {\n          id: \"t0095\",\n          department: \"建一部\",\n          name: \"王大明\",\n        },\n        {\n          id: \"t0096\",\n          department: \"建二部\",\n          name: \"蔡先生\",\n        },\n        {\n          id: \"t0097\",\n          department: \"建三部\",\n          name: \"吳先生\",\n        },\n      ],\n      inputValue: \"\",\n      memberList: [],\n      selectTags: [],\n    };\n  },\n  methods: {\n    // 獲取API\n    getApi() {\n      userList().then((res) => {\n        this.memberList = res.data;\n      });\n    },\n    // 會辦畫面選擇對象\n    select(val) {\n      this.selectTags = JSON.parse(JSON.stringify(val));\n    },\n    //開啟會辦選擇視窗\n    edit_countersign() {\n      this.dialogVisible = true;\n      // this.tags = JSON.parse(JSON.stringify(row));\n      // this.editForm = row;\n\n      // el-table的checkbox預設勾選\n      this.$nextTick(() => {\n        this.tags.forEach((item) => {\n          this.memberList.forEach((subItem) => {\n            if (item.id === subItem.id) {\n              this.$refs.multipleTables.toggleRowSelection(subItem, true);\n            }\n          });\n        });\n      });\n    },\n    // 送出確定會辦人員\n    memberListDialog_Confirm() {\n      this.tags = this.selectTags;\n      this.dialogVisible = false;\n      this.$nextTick(() => {\n        this.tags.forEach((item) => {\n          this.$refs.multipleTables.toggleRowSelection(item, false);\n        });\n      });\n    },\n    //取消\n    memberListDialog_Cancel() {\n      this.dialogVisible = false;\n      this.$nextTick(() => {\n        this.tags.forEach((item) => {\n          this.$refs.multipleTables.toggleRowSelection(item, false);\n        });\n      });\n    },\n\n    handleClose(tag) {\n      this.tags.splice(this.tags.indexOf(tag), 1);\n    },\n    handleInputConfirm() {\n      let inputValue = this.inputValue;\n      if (inputValue) {\n        this.tags.push({\n          name: inputValue,\n          id: GenNonDuplicateID(8),\n          department: \"\",\n        });\n      }\n      this.inputValue = \"\";\n    },\n  },\n  mounted() {\n    this.getApi();\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.inputError {\n  border: #f56c6c 1px solid;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}