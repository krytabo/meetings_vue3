{"ast":null,"code":"import { on, off } from './delegate';\nimport { getEventTarget } from './utils';\nconst traps = {\n  mousemoveoutside: new WeakMap(),\n  clickoutside: new WeakMap()\n};\nfunction createTrapHandler(name, el, originalHandler) {\n  if (name === 'mousemoveoutside') {\n    const moveHandler = e => {\n      if (el.contains(getEventTarget(e))) return;\n      originalHandler(e);\n    };\n    return {\n      mousemove: moveHandler,\n      touchstart: moveHandler\n    };\n  } else if (name === 'clickoutside') {\n    let mouseDownOutside = false;\n    const downHandler = e => {\n      mouseDownOutside = !el.contains(getEventTarget(e));\n    };\n    const upHanlder = e => {\n      if (!mouseDownOutside) return;\n      if (el.contains(getEventTarget(e))) return;\n      originalHandler(e);\n    };\n    return {\n      mousedown: downHandler,\n      mouseup: upHanlder,\n      touchstart: downHandler,\n      touchend: upHanlder\n    };\n  }\n  console.error(\n  // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n  `[evtd/create-trap-handler]: name \\`${name}\\` is invalid. This could be a bug of evtd.`);\n  return {};\n}\nfunction ensureTrapHandlers(name, el, handler) {\n  const handlers = traps[name];\n  let elHandlers = handlers.get(el);\n  if (elHandlers === undefined) {\n    handlers.set(el, elHandlers = new WeakMap());\n  }\n  let trapHandler = elHandlers.get(handler);\n  if (trapHandler === undefined) {\n    elHandlers.set(handler, trapHandler = createTrapHandler(name, el, handler));\n  }\n  return trapHandler;\n}\nfunction trapOn(name, el, handler, options) {\n  if (name === 'mousemoveoutside' || name === 'clickoutside') {\n    const trapHandlers = ensureTrapHandlers(name, el, handler);\n    Object.keys(trapHandlers).forEach(key => {\n      on(key, document, trapHandlers[key], options);\n    });\n    return true;\n  }\n  return false;\n}\nfunction trapOff(name, el, handler, options) {\n  if (name === 'mousemoveoutside' || name === 'clickoutside') {\n    const trapHandlers = ensureTrapHandlers(name, el, handler);\n    Object.keys(trapHandlers).forEach(key => {\n      off(key, document, trapHandlers[key], options);\n    });\n    return true;\n  }\n  return false;\n}\nexport { trapOff, trapOn };","map":{"version":3,"names":["on","off","getEventTarget","traps","mousemoveoutside","WeakMap","clickoutside","createTrapHandler","name","el","originalHandler","moveHandler","e","contains","mousemove","touchstart","mouseDownOutside","downHandler","upHanlder","mousedown","mouseup","touchend","console","error","ensureTrapHandlers","handler","handlers","elHandlers","get","undefined","set","trapHandler","trapOn","options","trapHandlers","Object","keys","forEach","key","document","trapOff"],"sources":["/Users/elmo/Documents/GitHub/meetings_vue3/node_modules/evtd/es/traps.js"],"sourcesContent":["import { on, off } from './delegate';\nimport { getEventTarget } from './utils';\nconst traps = {\n    mousemoveoutside: new WeakMap(),\n    clickoutside: new WeakMap()\n};\nfunction createTrapHandler(name, el, originalHandler) {\n    if (name === 'mousemoveoutside') {\n        const moveHandler = (e) => {\n            if (el.contains(getEventTarget(e)))\n                return;\n            originalHandler(e);\n        };\n        return {\n            mousemove: moveHandler,\n            touchstart: moveHandler\n        };\n    }\n    else if (name === 'clickoutside') {\n        let mouseDownOutside = false;\n        const downHandler = (e) => {\n            mouseDownOutside = !el.contains(getEventTarget(e));\n        };\n        const upHanlder = (e) => {\n            if (!mouseDownOutside)\n                return;\n            if (el.contains(getEventTarget(e)))\n                return;\n            originalHandler(e);\n        };\n        return {\n            mousedown: downHandler,\n            mouseup: upHanlder,\n            touchstart: downHandler,\n            touchend: upHanlder\n        };\n    }\n    console.error(\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    `[evtd/create-trap-handler]: name \\`${name}\\` is invalid. This could be a bug of evtd.`);\n    return {};\n}\nfunction ensureTrapHandlers(name, el, handler) {\n    const handlers = traps[name];\n    let elHandlers = handlers.get(el);\n    if (elHandlers === undefined) {\n        handlers.set(el, (elHandlers = new WeakMap()));\n    }\n    let trapHandler = elHandlers.get(handler);\n    if (trapHandler === undefined) {\n        elHandlers.set(handler, (trapHandler = createTrapHandler(name, el, handler)));\n    }\n    return trapHandler;\n}\nfunction trapOn(name, el, handler, options) {\n    if (name === 'mousemoveoutside' || name === 'clickoutside') {\n        const trapHandlers = ensureTrapHandlers(name, el, handler);\n        Object.keys(trapHandlers).forEach((key) => {\n            on(key, document, trapHandlers[key], options);\n        });\n        return true;\n    }\n    return false;\n}\nfunction trapOff(name, el, handler, options) {\n    if (name === 'mousemoveoutside' || name === 'clickoutside') {\n        const trapHandlers = ensureTrapHandlers(name, el, handler);\n        Object.keys(trapHandlers).forEach((key) => {\n            off(key, document, trapHandlers[key], options);\n        });\n        return true;\n    }\n    return false;\n}\nexport { trapOff, trapOn };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}