{"ast":null,"code":"import { defineComponent, h, inject, ref, watchEffect } from 'vue';\nimport { NInput } from '../../input';\nimport { colorPickerInjectionKey } from './context';\n// 0 - 255\nfunction normalizeRgbUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value), 255));\n  }\n  return false;\n}\n// 0 - 360\nfunction normalizeHueUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value), 360));\n  }\n  return false;\n}\n// 0 - 100\nfunction normalizeSlvUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value), 100));\n  }\n  return false;\n}\nfunction normalizeHexaUnit(value) {\n  const trimmedValue = value.trim();\n  if (/^#[0-9a-fA-F]+$/.test(trimmedValue)) {\n    return [4, 5, 7, 9].includes(trimmedValue.length);\n  }\n  return false;\n}\n// 0 - 100%\nfunction normalizeAlphaUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*%$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value) / 100, 100));\n  }\n  return false;\n}\nconst inputThemeOverrides = {\n  paddingSmall: '0 4px'\n};\nexport default defineComponent({\n  name: 'ColorInputUnit',\n  props: {\n    label: {\n      type: String,\n      required: true\n    },\n    value: {\n      type: [Number, String],\n      default: null\n    },\n    showAlpha: Boolean,\n    onUpdateValue: {\n      type: Function,\n      required: true\n    }\n  },\n  setup(props) {\n    const inputValueRef = ref('');\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const {\n      themeRef\n    } = inject(colorPickerInjectionKey, null);\n    watchEffect(() => {\n      inputValueRef.value = getInputString();\n    });\n    function getInputString() {\n      const {\n        value\n      } = props;\n      if (value === null) return '';\n      const {\n        label\n      } = props;\n      if (label === 'HEX') {\n        return value;\n      }\n      if (label === 'A') {\n        return `${Math.floor(value * 100)}%`;\n      }\n      return String(Math.floor(value));\n    }\n    function handleInputUpdateValue(value) {\n      inputValueRef.value = value;\n    }\n    function handleInputChange(value) {\n      let unit;\n      let valid;\n      switch (props.label) {\n        case 'HEX':\n          valid = normalizeHexaUnit(value);\n          if (valid) {\n            props.onUpdateValue(value);\n          }\n          inputValueRef.value = getInputString(); // to normalized new value\n          break;\n        case 'H':\n          unit = normalizeHueUnit(value);\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n          break;\n        case 'S':\n        case 'L':\n        case 'V':\n          unit = normalizeSlvUnit(value);\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n          break;\n        case 'A':\n          unit = normalizeAlphaUnit(value);\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n          break;\n        case 'R':\n        case 'G':\n        case 'B':\n          unit = normalizeRgbUnit(value);\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n          break;\n      }\n    }\n    return {\n      mergedTheme: themeRef,\n      inputValue: inputValueRef,\n      handleInputChange,\n      handleInputUpdateValue\n    };\n  },\n  render() {\n    const {\n      mergedTheme\n    } = this;\n    return h(NInput, {\n      size: \"small\",\n      placeholder: this.label,\n      theme: mergedTheme.peers.Input,\n      themeOverrides: mergedTheme.peerOverrides.Input,\n      builtinThemeOverrides: inputThemeOverrides,\n      value: this.inputValue,\n      onUpdateValue: this.handleInputUpdateValue,\n      onChange: this.handleInputChange,\n      // add more space for xxx% input\n      style: this.label === 'A' ? 'flex-grow: 1.25;' : ''\n    });\n  }\n});","map":{"version":3,"names":["defineComponent","h","inject","ref","watchEffect","NInput","colorPickerInjectionKey","normalizeRgbUnit","value","test","trim","Math","max","min","parseInt","normalizeHueUnit","normalizeSlvUnit","normalizeHexaUnit","trimmedValue","includes","length","normalizeAlphaUnit","inputThemeOverrides","paddingSmall","name","props","label","type","String","required","Number","default","showAlpha","Boolean","onUpdateValue","Function","setup","inputValueRef","themeRef","getInputString","floor","handleInputUpdateValue","handleInputChange","unit","valid","mergedTheme","inputValue","render","size","placeholder","theme","peers","Input","themeOverrides","peerOverrides","builtinThemeOverrides","onChange","style"],"sources":["/Users/elmo/GitHub/meetings_vue3/node_modules/naive-ui/es/color-picker/src/ColorInputUnit.js"],"sourcesContent":["import { defineComponent, h, inject, ref, watchEffect } from 'vue';\nimport { NInput } from '../../input';\nimport { colorPickerInjectionKey } from './context';\n// 0 - 255\nfunction normalizeRgbUnit(value) {\n    if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n        return Math.max(0, Math.min(parseInt(value), 255));\n    }\n    return false;\n}\n// 0 - 360\nfunction normalizeHueUnit(value) {\n    if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n        return Math.max(0, Math.min(parseInt(value), 360));\n    }\n    return false;\n}\n// 0 - 100\nfunction normalizeSlvUnit(value) {\n    if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n        return Math.max(0, Math.min(parseInt(value), 100));\n    }\n    return false;\n}\nfunction normalizeHexaUnit(value) {\n    const trimmedValue = value.trim();\n    if (/^#[0-9a-fA-F]+$/.test(trimmedValue)) {\n        return [4, 5, 7, 9].includes(trimmedValue.length);\n    }\n    return false;\n}\n// 0 - 100%\nfunction normalizeAlphaUnit(value) {\n    if (/^\\d{1,3}\\.?\\d*%$/.test(value.trim())) {\n        return Math.max(0, Math.min(parseInt(value) / 100, 100));\n    }\n    return false;\n}\nconst inputThemeOverrides = {\n    paddingSmall: '0 4px'\n};\nexport default defineComponent({\n    name: 'ColorInputUnit',\n    props: {\n        label: {\n            type: String,\n            required: true\n        },\n        value: {\n            type: [Number, String],\n            default: null\n        },\n        showAlpha: Boolean,\n        onUpdateValue: {\n            type: Function,\n            required: true\n        }\n    },\n    setup(props) {\n        const inputValueRef = ref('');\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const { themeRef } = inject(colorPickerInjectionKey, null);\n        watchEffect(() => {\n            inputValueRef.value = getInputString();\n        });\n        function getInputString() {\n            const { value } = props;\n            if (value === null)\n                return '';\n            const { label } = props;\n            if (label === 'HEX') {\n                return value;\n            }\n            if (label === 'A') {\n                return `${Math.floor(value * 100)}%`;\n            }\n            return String(Math.floor(value));\n        }\n        function handleInputUpdateValue(value) {\n            inputValueRef.value = value;\n        }\n        function handleInputChange(value) {\n            let unit;\n            let valid;\n            switch (props.label) {\n                case 'HEX':\n                    valid = normalizeHexaUnit(value);\n                    if (valid) {\n                        props.onUpdateValue(value);\n                    }\n                    inputValueRef.value = getInputString(); // to normalized new value\n                    break;\n                case 'H':\n                    unit = normalizeHueUnit(value);\n                    if (unit === false) {\n                        inputValueRef.value = getInputString();\n                    }\n                    else {\n                        props.onUpdateValue(unit);\n                    }\n                    break;\n                case 'S':\n                case 'L':\n                case 'V':\n                    unit = normalizeSlvUnit(value);\n                    if (unit === false) {\n                        inputValueRef.value = getInputString();\n                    }\n                    else {\n                        props.onUpdateValue(unit);\n                    }\n                    break;\n                case 'A':\n                    unit = normalizeAlphaUnit(value);\n                    if (unit === false) {\n                        inputValueRef.value = getInputString();\n                    }\n                    else {\n                        props.onUpdateValue(unit);\n                    }\n                    break;\n                case 'R':\n                case 'G':\n                case 'B':\n                    unit = normalizeRgbUnit(value);\n                    if (unit === false) {\n                        inputValueRef.value = getInputString();\n                    }\n                    else {\n                        props.onUpdateValue(unit);\n                    }\n                    break;\n            }\n        }\n        return {\n            mergedTheme: themeRef,\n            inputValue: inputValueRef,\n            handleInputChange,\n            handleInputUpdateValue\n        };\n    },\n    render() {\n        const { mergedTheme } = this;\n        return (h(NInput, { size: \"small\", placeholder: this.label, theme: mergedTheme.peers.Input, themeOverrides: mergedTheme.peerOverrides.Input, builtinThemeOverrides: inputThemeOverrides, value: this.inputValue, onUpdateValue: this.handleInputUpdateValue, onChange: this.handleInputChange, \n            // add more space for xxx% input\n            style: this.label === 'A' ? 'flex-grow: 1.25;' : '' }));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}