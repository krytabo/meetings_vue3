{"ast":null,"code":"import { defineComponent, h, nextTick, ref, computed, watch, toRef } from 'vue';\nexport default defineComponent({\n  name: 'SlotMachineNumber',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    value: {\n      // could be '+', 1, 2, ...\n      type: [Number, String],\n      required: true\n    },\n    oldOriginalNumber: {\n      type: Number,\n      default: undefined\n    },\n    newOriginalNumber: {\n      type: Number,\n      default: undefined\n    }\n  },\n  setup(props) {\n    const numberRef = ref(null);\n    const oldNumberRef = ref(props.value);\n    const newNumberRef = ref(props.value);\n    const scrollAnimationDirectionRef = ref('up');\n    const activeRef = ref(false);\n    const newNumberScrollAnimationClassRef = computed(() => {\n      return activeRef.value ? `${props.clsPrefix}-base-slot-machine-current-number--${scrollAnimationDirectionRef.value}-scroll` : null;\n    });\n    const oldNumberScrollAnimationClassRef = computed(() => {\n      return activeRef.value ? `${props.clsPrefix}-base-slot-machine-old-number--${scrollAnimationDirectionRef.value}-scroll` : null;\n    });\n    // BUG: may be typescript bug\n    watch(toRef(props, 'value'), (value, oldValue) => {\n      oldNumberRef.value = oldValue;\n      newNumberRef.value = value;\n      void nextTick(scroll);\n    });\n    function scroll() {\n      const newOriginalNumber = props.newOriginalNumber;\n      const oldOriginalNumber = props.oldOriginalNumber;\n      if (oldOriginalNumber === undefined || newOriginalNumber === undefined) {\n        return;\n      }\n      if (newOriginalNumber > oldOriginalNumber) {\n        scrollByDir('up');\n      } else if (oldOriginalNumber > newOriginalNumber) {\n        scrollByDir('down');\n      }\n    }\n    function scrollByDir(dir) {\n      scrollAnimationDirectionRef.value = dir;\n      activeRef.value = false;\n      void nextTick(() => {\n        var _a;\n        void ((_a = numberRef.value) === null || _a === void 0 ? void 0 : _a.offsetWidth);\n        activeRef.value = true;\n      });\n    }\n    return () => {\n      const {\n        clsPrefix\n      } = props;\n      return h(\"span\", {\n        ref: numberRef,\n        class: `${clsPrefix}-base-slot-machine-number`\n      }, oldNumberRef.value !== null ? h(\"span\", {\n        class: [`${clsPrefix}-base-slot-machine-old-number ${clsPrefix}-base-slot-machine-old-number--top`, oldNumberScrollAnimationClassRef.value]\n      }, oldNumberRef.value) : null, h(\"span\", {\n        class: [`${clsPrefix}-base-slot-machine-current-number`, newNumberScrollAnimationClassRef.value]\n      }, h(\"span\", {\n        ref: \"numberWrapper\",\n        class: [`${clsPrefix}-base-slot-machine-current-number__inner`, typeof props.value !== 'number' && `${clsPrefix}-base-slot-machine-current-number__inner--not-number`]\n      }, newNumberRef.value)), oldNumberRef.value !== null ? h(\"span\", {\n        class: [`${clsPrefix}-base-slot-machine-old-number ${clsPrefix}-base-slot-machine-old-number--bottom`, oldNumberScrollAnimationClassRef.value]\n      }, oldNumberRef.value) : null);\n    };\n  }\n});","map":{"version":3,"names":["defineComponent","h","nextTick","ref","computed","watch","toRef","name","props","clsPrefix","type","String","required","value","Number","oldOriginalNumber","default","undefined","newOriginalNumber","setup","numberRef","oldNumberRef","newNumberRef","scrollAnimationDirectionRef","activeRef","newNumberScrollAnimationClassRef","oldNumberScrollAnimationClassRef","oldValue","scroll","scrollByDir","dir","_a","offsetWidth","class"],"sources":["/Users/elmo/GitHub/meetings_vue3/node_modules/naive-ui/es/_internal/slot-machine/src/SlotMachineNumber.js"],"sourcesContent":["import { defineComponent, h, nextTick, ref, computed, watch, toRef } from 'vue';\nexport default defineComponent({\n    name: 'SlotMachineNumber',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        value: {\n            // could be '+', 1, 2, ...\n            type: [Number, String],\n            required: true\n        },\n        oldOriginalNumber: {\n            type: Number,\n            default: undefined\n        },\n        newOriginalNumber: {\n            type: Number,\n            default: undefined\n        }\n    },\n    setup(props) {\n        const numberRef = ref(null);\n        const oldNumberRef = ref(props.value);\n        const newNumberRef = ref(props.value);\n        const scrollAnimationDirectionRef = ref('up');\n        const activeRef = ref(false);\n        const newNumberScrollAnimationClassRef = computed(() => {\n            return activeRef.value\n                ? `${props.clsPrefix}-base-slot-machine-current-number--${scrollAnimationDirectionRef.value}-scroll`\n                : null;\n        });\n        const oldNumberScrollAnimationClassRef = computed(() => {\n            return activeRef.value\n                ? `${props.clsPrefix}-base-slot-machine-old-number--${scrollAnimationDirectionRef.value}-scroll`\n                : null;\n        });\n        // BUG: may be typescript bug\n        watch(toRef(props, 'value'), (value, oldValue) => {\n            oldNumberRef.value = oldValue;\n            newNumberRef.value = value;\n            void nextTick(scroll);\n        });\n        function scroll() {\n            const newOriginalNumber = props.newOriginalNumber;\n            const oldOriginalNumber = props.oldOriginalNumber;\n            if (oldOriginalNumber === undefined || newOriginalNumber === undefined) {\n                return;\n            }\n            if (newOriginalNumber > oldOriginalNumber) {\n                scrollByDir('up');\n            }\n            else if (oldOriginalNumber > newOriginalNumber) {\n                scrollByDir('down');\n            }\n        }\n        function scrollByDir(dir) {\n            scrollAnimationDirectionRef.value = dir;\n            activeRef.value = false;\n            void nextTick(() => {\n                var _a;\n                void ((_a = numberRef.value) === null || _a === void 0 ? void 0 : _a.offsetWidth);\n                activeRef.value = true;\n            });\n        }\n        return () => {\n            const { clsPrefix } = props;\n            return (h(\"span\", { ref: numberRef, class: `${clsPrefix}-base-slot-machine-number` },\n                oldNumberRef.value !== null ? (h(\"span\", { class: [\n                        `${clsPrefix}-base-slot-machine-old-number ${clsPrefix}-base-slot-machine-old-number--top`,\n                        oldNumberScrollAnimationClassRef.value\n                    ] }, oldNumberRef.value)) : null,\n                h(\"span\", { class: [\n                        `${clsPrefix}-base-slot-machine-current-number`,\n                        newNumberScrollAnimationClassRef.value\n                    ] },\n                    h(\"span\", { ref: \"numberWrapper\", class: [\n                            `${clsPrefix}-base-slot-machine-current-number__inner`,\n                            typeof props.value !== 'number' &&\n                                `${clsPrefix}-base-slot-machine-current-number__inner--not-number`\n                        ] }, newNumberRef.value)),\n                oldNumberRef.value !== null ? (h(\"span\", { class: [\n                        `${clsPrefix}-base-slot-machine-old-number ${clsPrefix}-base-slot-machine-old-number--bottom`,\n                        oldNumberScrollAnimationClassRef.value\n                    ] }, oldNumberRef.value)) : null));\n        };\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}